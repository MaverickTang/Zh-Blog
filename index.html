<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/Blogs/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/Blogs/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/Blogs/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/Blogs/images/logo.svg" color="#222">

<link rel="stylesheet" href="/Blogs/css/main.css">


<link rel="stylesheet" href="/Blogs/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"mavericktang.github.io","root":"/Blogs/","scheme":"Pisces","version":"7.7.2","exturl":false,"sidebar":{"position":"left","width":320,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Live without Barricades!">
<meta property="og:type" content="website">
<meta property="og:title" content="Mavericreate.Blog">
<meta property="og:url" content="https://mavericktang.github.io/Blogs/index.html">
<meta property="og:site_name" content="Mavericreate.Blog">
<meta property="og:description" content="Live without Barricades!">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Haotian Tang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://mavericktang.github.io/Blogs/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>
<script type="text/javascript">
  // Wait for the page to load first
  var _prevOnload = window.onload;
  window.onload = function() {
      var switchLang = document.getElementsByClassName("menu-item menu-item-switch_lang")[0];
      switchLang.onclick = function() {
          var href = window.location.href;
          var indexOfEn = href.toLowerCase().indexOf('/en/');
          if(indexOfEn !== -1) {
              window.location.href = href.replace('/en/', '/');
          }
          else {
              window.location.href = href.replace(/(^http[s]?:\/\/[a-z0-9.]*[:?0-9]*\/)(.*)/i, '$1en/$2');
          }
          if(typeof(_prevOnload) === 'function') {
              _prevOnload();
          }
          return false;
      }
  }
</script>j

  <title>Mavericreate.Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/Blogs/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Mavericreate.Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">if(Coding == Happiness && Happiness == Life)</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/Blogs/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/Blogs/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/Blogs/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/Blogs/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-switch_lang">

    <a href="https://mavericktang.github.io/en" rel="section"><i class="fa fa-fw fa-language"></i>English</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="search-pop-overlay">
  <div class="popup search-popup">
      <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

  </div>
</div>

  </div>
</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/MaverickTang" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mavericktang.github.io/Blogs/2020/03/14/Bitwise-operation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blogs/images/avatar.gif">
      <meta itemprop="name" content="Haotian Tang">
      <meta itemprop="description" content="Live without Barricades!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mavericreate.Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/Blogs/2020/03/14/Bitwise-operation/" class="post-title-link" itemprop="url">Bitwise operation</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-14 11:13:38 / 修改时间：12:01:24" itemprop="dateCreated datePublished" datetime="2020-03-14T11:13:38-07:00">2020-03-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blogs/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Bitwise-Operation"><a href="#Bitwise-Operation" class="headerlink" title="Bitwise Operation"></a>Bitwise Operation</h1><h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a><a href="https://en.wikipedia.org/wiki/Bitwise_operation" target="_blank" rel="noopener">Intro</a></h2><p> In <a href="https://en.wikipedia.org/wiki/Digital_computer" target="_blank" rel="noopener">digital computer</a> <a href="https://en.wikipedia.org/wiki/Computer_programming" target="_blank" rel="noopener">programming</a>, a <strong>bitwise operation</strong> operates on one or more <a href="https://en.wikipedia.org/wiki/Bit_pattern" target="_blank" rel="noopener">bit patterns</a> or <a href="https://en.wikipedia.org/wiki/Binary_numeral_system" target="_blank" rel="noopener">binary numerals</a> at the level of their individual <a href="https://en.wikipedia.org/wiki/Bit" target="_blank" rel="noopener">bits</a>. It is a fast and simple action, directly supported by the <a href="https://en.wikipedia.org/wiki/Central_processing_unit" target="_blank" rel="noopener">processor</a>, and is used to manipulate values for comparisons and calculations.</p>
<p>It can be divided into:</p>
<h3 id="Bit-addressing-operator："><a href="#Bit-addressing-operator：" class="headerlink" title="Bit addressing operator："></a>Bit addressing operator：</h3><p>   <strong>&amp;</strong>  And</p>
<p>   <strong>|</strong>  Or</p>
<p>   <strong>^</strong> XOR</p>
<p>   <strong>~</strong> Not</p>
<h3 id="Bit-shifting-Operator："><a href="#Bit-shifting-Operator：" class="headerlink" title="Bit shifting Operator："></a>Bit shifting Operator：</h3><p>   <strong>&lt;&lt;</strong> Shift to left</p>
<p>   <strong>&gt;&gt;</strong> Shift to right</p>
<h2 id="Operator-Instructions"><a href="#Operator-Instructions" class="headerlink" title="Operator Instructions"></a>Operator Instructions</h2><h3 id="amp"><a href="#amp" class="headerlink" title="&amp;"></a>&amp;</h3><p>Base on the name <strong>“and”</strong>. It is easy for us to know that: if 1 is true and 0 is false. Only a and b are <strong>both true</strong>, the statement is true.</p>
<table>
<thead>
<tr>
<th>0&amp;0</th>
<th>0</th>
</tr>
</thead>
<tbody><tr>
<td>0&amp;1</td>
<td>0</td>
</tr>
<tr>
<td>0&amp;1</td>
<td>0</td>
</tr>
<tr>
<td>1&amp;1</td>
<td>1</td>
</tr>
</tbody></table>
<h3 id=""><a href="#" class="headerlink" title="|"></a>|</h3><p><strong>“Or”</strong> is pretty similar to “and”. As long as a or b is true, the statement is true.</p>
<table>
<thead>
<tr>
<th>0|0</th>
<th>0</th>
</tr>
</thead>
<tbody><tr>
<td>0|1</td>
<td>1</td>
</tr>
<tr>
<td>0|1</td>
<td>1</td>
</tr>
<tr>
<td>1|1</td>
<td>1</td>
</tr>
</tbody></table>
<h3 id="-1"><a href="#-1" class="headerlink" title="^"></a>^</h3><p><strong>“Xor”</strong> becomes a little complicated. That is: a and b must happen at the same time, else they won’t happen. Only both happen or none happen are true.</p>
<table>
<thead>
<tr>
<th>0^0</th>
<th>1</th>
</tr>
</thead>
<tbody><tr>
<td>0^1</td>
<td>0</td>
</tr>
<tr>
<td>0^1</td>
<td>0</td>
</tr>
<tr>
<td>1^1</td>
<td>1</td>
</tr>
</tbody></table>
<h3 id="-2"><a href="#-2" class="headerlink" title="~"></a>~</h3><p><strong>“Not”</strong>, easy body. So true becomes not true = false. False becomes not false = true. </p>
<h3 id="lt-lt"><a href="#lt-lt" class="headerlink" title="&lt;&lt;"></a>&lt;&lt;</h3><p><strong>“Shift to the left”</strong></p>
<p>Take a&lt;&lt;2 for example. It is switch a into binary number and move to the left by 2. </p>
<p>$\therefore$ 100&lt;&lt;2, (100)<sub>2</sub>=1100100&lt;&lt;2=110010000=400. We can tell that it is equal to 100*2^2^.</p>
<h3 id="gt-gt"><a href="#gt-gt" class="headerlink" title="&gt;&gt;"></a>&gt;&gt;</h3><p><strong>“Shift to the right”</strong></p>
<p>Take a&gt;&gt;2 for example. It is switch a into binary number and move to the right by 2. </p>
<p>$\therefore$ 100&lt;&lt;2, (100)<sub>2</sub>=1100100&lt;&lt;2=11001=25. We can tell that it is equal to 100/2^2^.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mavericktang.github.io/Blogs/2020/03/11/Data-Structure-Tree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blogs/images/avatar.gif">
      <meta itemprop="name" content="Haotian Tang">
      <meta itemprop="description" content="Live without Barricades!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mavericreate.Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/Blogs/2020/03/11/Data-Structure-Tree/" class="post-title-link" itemprop="url">Data Structure: Tree</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-11 16:35:49" itemprop="dateCreated datePublished" datetime="2020-03-11T16:35:49-07:00">2020-03-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-17 16:32:04" itemprop="dateModified" datetime="2020-03-17T16:32:04-07:00">2020-03-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blogs/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>19k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>17 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Data-Structure-Tree"><a href="#Data-Structure-Tree" class="headerlink" title="Data Structure: Tree"></a>Data Structure: Tree</h1><h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>In computer science, a <strong>data structure</strong> is a data organization, management, and storage format that enables efficient access and modification. More precisely, a data structure is a collection of data values, the relationships among them, and the functions or operations that can be applied to the data</p>
<h2 id="Basic-Info"><a href="#Basic-Info" class="headerlink" title="Basic Info"></a>Basic Info</h2><p>Tree in computer science is the same as the tree in the real world. But we are more used to put the root on the top to think about the tree.</p>
<p>A tree without any stable point is <strong>unrooted tree</strong>, it has those equalievent definition:</p>
<ul>
<li>Has n points, n-1 edges linked undirected graph</li>
<li>Undirected graph but without cycle</li>
<li>Undirected graph which two points have and only have a simple path</li>
</ul>
<p>In the base as the unrooted graph, the specific point is <strong>root</strong>.</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/Data-Structure-Tree/tree-basic.png" alt=""></p>
<h2 id="Restore-it"><a href="#Restore-it" class="headerlink" title="Restore it!"></a>Restore it!</h2><h3 id="Segment-tree"><a href="#Segment-tree" class="headerlink" title="Segment tree"></a><a href="https://en.wikipedia.org/wiki/Segment_tree" target="_blank" rel="noopener">Segment tree</a></h3><p>In computer science, a <strong>segment tree,</strong> also known as a statistic tree, is a tree data structure used for <strong>storing information about intervals, or segments</strong>. It allows querying which of the stored segments contain a given point. It is, in principle, a static structure; that is, it’s a structure that <strong>cannot be modified once it’s built</strong>. A similar data structure is the interval tree. A segment tree for a set <em>I</em> of <em>n</em> intervals uses <a href="https://en.wikipedia.org/wiki/Big_O_notation" target="_blank" rel="noopener"><em>O</em></a>(<em>n</em> log <em>n</em>) storage and can be built in <em>O</em>(<em>n</em> log <em>n</em>) time. Segment trees support searching for all the intervals that contain a query point in <em>O</em>(log <em>n</em> + <em>k</em>), <em>k</em>being the number of retrieved intervals or segments.</p>
<p>So it has every characteristic binary tree has:</p>
<ul>
<li><p>There are at <strong>most 2^(i-1)^(i$&gt;=$1) points</strong> in the <strong>number i layer</strong> of the binary tree</p>
</li>
<li><p>There are at <strong>most 2^(i-1)^(i$&gt;=$1) points</strong> in the binary tree which’s  <strong>depth is i</strong></p>
</li>
<li><p>A binary tree which has <strong>n points</strong> has <strong>log2^n^+1 depth</strong></p>
</li>
<li><p>For a perfect binary tree which has n points, for any point i(1&lt;=i&lt;=n):</p>
<p>If i==1, then i is the root of the binary tree, else if i&gt;1, then i’s parent is i/2</p>
<p>if 2i&gt;n, then i has no left child</p>
<p>If 2i+1&gt;n, then i has no right child</p>
</li>
</ul>
<h4 id="Charastics-of-Segment-tree"><a href="#Charastics-of-Segment-tree" class="headerlink" title="Charastics of Segment tree"></a>Charastics of Segment tree</h4><ul>
<li><p>almost perfect binary tree. </p>
</li>
<li><p>i’s <strong>father</strong> is i/2(suppose i is a point in the tree)</p>
</li>
<li><p>i’s <strong>brothers</strong> are b=i/2*2andanother one is b+1. </p>
</li>
<li><p>i’s <strong>children</strong> are l=i*2and r=l+1</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/Data-Structure-Tree/t016b0d2e51e372bef0.png" alt=""></p>
<h4 id="Restoring"><a href="#Restoring" class="headerlink" title="Restoring"></a>Restoring</h4><p>Base on the charastic of the binary tree. We can easily build the Segment tree.</p>
<p>Because the segment tree, every point has larger value which is stored in one of its children. So we need to store its children in order to know the segment. And also the value of the point of course. Because the question would ask the data in the original order, so we also need to store those info.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mx=<span class="number">100001</span>; </span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll; </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span> </span><br><span class="line">    <span class="keyword">int</span> l, r; <span class="comment">//left son and right son</span></span><br><span class="line">    ll val; <span class="comment">//The largest value</span></span><br><span class="line">&#125;  tr[mx&lt;&lt;<span class="number">2</span>] ;<span class="comment">//mx&lt;&lt;2 is equal to mx*2.</span></span><br><span class="line"><span class="keyword">int</span> n, a[mx]= &#123;<span class="number">0</span>&#125;;<span class="comment">//points number, the array restoring data</span></span><br><span class="line"><span class="keyword">int</span> real[mx]=&#123;<span class="number">0</span>&#125;;<span class="comment">//The real poisition for the leaves</span></span><br></pre></td></tr></table></figure>

<h4 id="Building"><a href="#Building" class="headerlink" title="Building"></a>Building</h4><p>We build the tree from its root, then its sons. Then we keep build sons’s sons through recursion. And when we finally get to the deepest point of the tree(leaves). We need to memerozie the number for the leaves and restore the value.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">   tr[i].l=l, tr[i].r=r, tr[i].val=<span class="number">0</span>;</span><br><span class="line">   <span class="keyword">if</span>(l==r)&#123; <span class="comment">//if reach the leaf point</span></span><br><span class="line">     real[l]=i; <span class="comment">//memerozie the number for the leaves</span></span><br><span class="line">     tr[i].val=a[l]; <span class="comment">// restore the value</span></span><br><span class="line">     <span class="keyword">return</span>;<span class="comment">//End the function</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>; <span class="comment">//Midpoint</span></span><br><span class="line">   build(i&lt;&lt;<span class="number">1</span>,l,m); <span class="comment">//Left son</span></span><br><span class="line">   build(i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,m+<span class="number">1</span>,r); <span class="comment">//right son</span></span><br><span class="line">   tr[i].val=<span class="built_in">max</span>(tr[i&lt;&lt;<span class="number">1</span>].val,tr[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].val);<span class="comment">//Renew the value of the father ponint through son's point</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Query-segment"><a href="#Query-segment" class="headerlink" title="Query segment"></a>Query segment</h4><p>Query will return the max value for the segment. So it will firtst find out if the request segment is in the domain, and return the value.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(tr[i].l&gt;=l&amp;&amp;tr[i].r&lt;=r)<span class="keyword">return</span> tr[i].val;<span class="comment">//In range</span></span><br><span class="line">	<span class="keyword">if</span>(tr[i].l&gt;r||tr[i].r&lt;l)<span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//not in</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">max</span>(tr[i&lt;&lt;<span class="number">1</span>].val, tr[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].val);<span class="comment">//Else return the max in sons</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Update-value（One-point）"><a href="#Update-value（One-point）" class="headerlink" title="Update value（One point）"></a>Update value（One point）</h4><p>Once we changed a point. It will influence its father and all the way to the root.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> tr[real[a]].val=k;<span class="comment">//IN the main func, change the value of a point</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(i==<span class="number">1</span>) <span class="keyword">return</span>;<span class="comment">//To the root</span></span><br><span class="line">   <span class="keyword">int</span> fi=i&gt;&gt;<span class="number">1</span>;<span class="comment">//calculate its father</span></span><br><span class="line">   tr[fi].val=<span class="built_in">max</span>(tr[fi&lt;&lt;<span class="number">1</span>].val, tr[fi&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].val);</span><br><span class="line">   update(fi);<span class="comment">//Update father</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Update-Value-Segment"><a href="#Update-Value-Segment" class="headerlink" title="Update Value(Segment)"></a>Update Value(Segment)</h3><p>When we trying to update the value for a segment, it is impossible to update one point by one pointO(nlogn). So we add a lazy tag which store the value that need to be updated.  So the segment update will be more like query segment. So we need to discuss If the segment we need to update is inside the segment…….</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123; </span><br><span class="line">tr[i].l=l,tr[i].r=r,tr[i].val=<span class="number">0</span>,tr[i].lazy=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;  tr[i].val=a[l];  <span class="keyword">return</span>;&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>; <span class="comment">//Same old story</span></span><br><span class="line">build(i&lt;&lt;<span class="number">1</span>,l,mid); </span><br><span class="line">build(i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid+<span class="number">1</span>,r);</span><br><span class="line">tr[i].val=tr[i&lt;&lt;<span class="number">1</span>].val+tr[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].val; <span class="comment">//It can also restore the value of the sum</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k)</span> </span>&#123; <span class="comment">//K is the value we need to update</span></span><br><span class="line">  <span class="keyword">if</span>(l&lt;=tr[i].l&amp;&amp;r&gt;=tr[i].r) &#123;<span class="comment">//If just inside the segment i</span></span><br><span class="line">    tr[i].lazy+=k; <span class="comment">//add k to lazy value</span></span><br><span class="line">    tr[i].val+=(tr[i].r-tr[i].l+<span class="number">1</span>)*k; <span class="comment">//add k to the segment</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="keyword">if</span>(r&lt;tr[i].l||l&gt;tr[i].r)<span class="keyword">return</span>; <span class="comment">// If it is not inside the segment i</span></span><br><span class="line">  </span><br><span class="line">  pushdown(i);<span class="comment">//Pushdown the value from the father segment</span></span><br><span class="line">  </span><br><span class="line">  update(i&lt;&lt;<span class="number">1</span>,l,r,k); <span class="comment">//Same old story</span></span><br><span class="line">  update(i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,l,r,k); </span><br><span class="line">  tr[i].val=tr[i&lt;&lt;<span class="number">1</span>].val+tr[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].val;<span class="comment">//In this kind, the value can only restore the summary of its son's value</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123; </span><br><span class="line"><span class="keyword">if</span>(tr[i].lazy==<span class="number">0</span>) <span class="keyword">return</span>;<span class="comment">//Don't need to update</span></span><br><span class="line">tr[i&lt;&lt;<span class="number">1</span>].lazy+=tr[i].lazy;<span class="comment">//pass lazy to left son</span></span><br><span class="line">tr[i&lt;&lt;<span class="number">1</span>].val+=tr[i].lazy*(tr[i&lt;&lt;<span class="number">1</span>].r-tr[i&lt;&lt;<span class="number">1</span>].l+<span class="number">1</span>); <span class="comment">//Update value of left son</span></span><br><span class="line">tr[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].lazy+=tr[i].lazy;<span class="comment">//right son</span></span><br><span class="line"> tr[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].val+=tr[i].lazy*(tr[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].r-tr[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].l+<span class="number">1</span>);</span><br><span class="line"> 	tr[i].lazy=<span class="number">0</span>;<span class="comment">//The value has passed</span></span><br><span class="line"> &#125; </span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(tr[i].l&gt;=l&amp;&amp;tr[i].r&lt;=r)<span class="keyword">return</span> tr[i].val;<span class="comment">//In range</span></span><br><span class="line">	<span class="keyword">if</span>(tr[i].l&gt;=r||tr[i].r&lt;=l)<span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//not in</span></span><br><span class="line">  pushdown(i); <span class="comment">//Update the value from the father point</span></span><br><span class="line">	<span class="keyword">return</span> query(i&lt;&lt;<span class="number">1</span>,l,r)+query(i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,l,r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Now we know the way to update the value for a segment.</p>
<p>How about the segment’s value time something?（Discussion question）</p>
<h2 id="Binary-Indexed-Tree"><a href="#Binary-Indexed-Tree" class="headerlink" title="Binary Indexed Tree"></a><a href="https://en.wikipedia.org/wiki/Fenwick_tree" target="_blank" rel="noopener">Binary Indexed Tree</a></h2><p> A data structure that can efficiently <strong>update elements</strong> and <strong>calculate prefix sums</strong> in a table of numbers.</p>
<p>We can understand it through segment tree. The Binary indexed tree aims to calculate the sum from a<sub>s</sub></p>
<p>a<sub>s+1</sub>…..a<sub>t</sub>. We can calculate it with segment tree. But what if we want to get it fast? If we can calculate the sum(1<del>t)-the sum(1</del>s-1), it works the same. Then we discover that the right son is no longer needed. We can get them from the father - left son.</p>
<p>![](<a href="https://raw.githubusercontent.com/MaverickTang/Images/master/Data-Structure-Tree/BInary" target="_blank" rel="noopener">https://raw.githubusercontent.com/MaverickTang/Images/master/Data-Structure-Tree/BInary</a> indexed tree.png)</p>
<p>So base on the graph below.</p>
<p>![](<a href="https://raw.githubusercontent.com/MaverickTang/Images/master/Data-Structure-Tree/Binary" target="_blank" rel="noopener">https://raw.githubusercontent.com/MaverickTang/Images/master/Data-Structure-Tree/Binary</a> simple.png)</p>
<p>Everytime we minus the last 1 in the binary expression, and add i’s value into the result, we can get the sum easily. This is the importance of lowbit.</p>
<table>
<thead>
<tr>
<th>i</th>
<th>Binary Expression</th>
</tr>
</thead>
<tbody><tr>
<td>5</td>
<td>0101</td>
</tr>
<tr>
<td>4</td>
<td>0100</td>
</tr>
<tr>
<td>0</td>
<td>0000</td>
</tr>
</tbody></table>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/Data-Structure-Tree/Example1.png" alt=""></p>
<p>When we update the data, we just add 0001 to the binary expression.</p>
<table>
<thead>
<tr>
<th>i</th>
<th>Binary Expression</th>
</tr>
</thead>
<tbody><tr>
<td>5</td>
<td>0101</td>
</tr>
<tr>
<td>6</td>
<td>0110</td>
</tr>
<tr>
<td>8</td>
<td>1000</td>
</tr>
</tbody></table>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/Data-Structure-Tree/Example2.png" alt=""></p>
<h3 id="Preparation-lowbit"><a href="#Preparation-lowbit" class="headerlink" title="Preparation: lowbit()"></a>Preparation: lowbit()</h3><p>Lowbit(i) will return the place for 1 in the binary system.</p>
<p>For instance, lowbit(10)will return 2 because (10)<sub>2</sub>=1010. And 1 is in the place 2.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Realization"><a href="#Realization" class="headerlink" title="Realization"></a>Realization</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="built_in">bit</span>[mx+<span class="number">1</span>], n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;<span class="comment">//Calculate the sum</span></span><br><span class="line">  <span class="keyword">int</span> s =<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    s+=<span class="built_in">bit</span>[i];  i-=lowbit(i);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//Add x to i</span></span><br><span class="line">    <span class="keyword">while</span>(i&lt;=n)&#123;</span><br><span class="line">       <span class="built_in">bit</span>[i]+=x; i+=lowbit(i);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Binary-Indexed-tree-amp-Inversion"><a href="#Binary-Indexed-tree-amp-Inversion" class="headerlink" title="Binary Indexed tree &amp; Inversion"></a>Binary Indexed tree &amp; Inversion</h2><h3 id="Inversion"><a href="#Inversion" class="headerlink" title="Inversion"></a><a href="https://en.wikipedia.org/wiki/Inversion_(discrete_mathematics)" target="_blank" rel="noopener">Inversion</a></h3><p>For a sequence A. If i&lt;j and A[i]&gt;A[j]. We call A[i] and A[j] are inversion.</p>
<p>So we can find the number of the inversion in this way</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = A.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">    cnt += sum(A[i]);</span><br><span class="line">    update(A[i], <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a><a href="http://poj.org/problem?id=1990" target="_blank" rel="noopener">Example</a></h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>Every year, Farmer John’s N (1 &lt;= N &lt;= 20,000) cows attend “MooFest”,a social gathering of cows from around the world. MooFest involves a variety of events including haybale stacking, fence jumping, pin the tail on the farmer, and of course, mooing. When the cows all stand in line for a particular event, they moo so loudly that the roar is practically deafening. After participating in this event year after year, some of the cows have in fact lost a bit of their hearing. </p>
<p>Each cow i has an associated “hearing” threshold v(i) (in the range 1..20,000). If a cow moos to cow i, she must use a volume of at least v(i) times the distance between the two cows in order to be heard by cow i. If two cows i and j wish to converse, they must speak at a volume level equal to the distance between them times max(v(i),v(j)). </p>
<p>Suppose each of the N cows is standing in a straight line (each cow at some unique x coordinate in the range 1..20,000), and every pair of cows is carrying on a conversation using the smallest possible volume. </p>
<p>Compute the sum of all the volumes produced by all N(N-1)/2 pairs of mooing cows. </p>
<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>* Line 1: A single integer, N </p>
<p>* Lines 2..N+1: Two integers: the volume threshold and x coordinate for a cow. Line 2 represents the first cow; line 3 represents the second cow; and so on. No two cows will stand at the same location. </p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>* Line 1: A single line with a single integer that is the sum of all the volumes of the conversing cows. </p>
<p>Sample Input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">3 1</span><br><span class="line">2 5</span><br><span class="line">2 6</span><br><span class="line">4 3</span><br></pre></td></tr></table></figure>

<p>Sample Output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">57</span><br></pre></td></tr></table></figure>

<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>Of course stimulation can be a good way, easy to think. But use the binary indexed tree can help to save a lot of time. So we sort cows first because when data is sorted from the smallest to the largest, we don’t need to worry about computation. So we need to use <strong>struct</strong> to restore the value. But we can’t make sure the x value for a cow, we must come up with a way to calculate the cows ( who are before cow i and x&lt;x<sub>i</sub>)’s sum of  x’s absolute value. </p>
<p>So we need to use two Binary Indexed tree to restore the data:</p>
<ul>
<li>The number of cows which are before i and x are smaller than x<sub>i</sub></li>
<li>The cows which are before i and x are smaller than x<sub>i</sub>, the sum of their x value</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span>  <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mx=<span class="number">50010</span>;</span><br><span class="line">ll n,<span class="built_in">bit</span>[mx],bit2[mx];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Cow</span>&#123;</span></span><br><span class="line">	ll v,d;</span><br><span class="line">&#125;c[mx];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Cow a,Cow b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a.v&lt;b.v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Binary index tree 1</span></span><br><span class="line"><span class="function">ll <span class="title">lowbit</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x&amp;(-x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(x&lt;mx)&#123;</span><br><span class="line">		<span class="built_in">bit</span>[x]+=k;</span><br><span class="line">		x+=lowbit(x);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">sum</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">	ll s=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">		s+=<span class="built_in">bit</span>[i];</span><br><span class="line">		i-=lowbit(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Binary index tree 1</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add2</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(x&lt;mx)&#123;</span><br><span class="line">		bit2[x]+=k;</span><br><span class="line">		x+=lowbit(x);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">sum2</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">	ll s=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">		s+=bit2[i];</span><br><span class="line">		i-=lowbit(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;c[i].v&gt;&gt;c[i].d;</span><br><span class="line">	sort(c+<span class="number">1</span>,c+<span class="number">1</span>+n,cmp);<span class="comment">//The cmp is write especially for structure</span></span><br><span class="line">	ll ans=<span class="number">0</span>,all=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		ll s1=sum(c[i].d),s2=sum2(c[i].d);</span><br><span class="line">		ans+=(s1*c[i].d-s2)*c[i].v;</span><br><span class="line">		ans+=((all-s2)-(i<span class="number">-1</span>-s1)*c[i].d)*c[i].v;</span><br><span class="line">			add(c[i].d,<span class="number">1</span>);</span><br><span class="line">			add2(c[i].d,c[i].d);</span><br><span class="line">			all+=c[i].d;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;ans;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Lowest-Common-Ancestor"><a href="#Lowest-Common-Ancestor" class="headerlink" title="Lowest Common Ancestor"></a><a href="https://en.wikipedia.org/wiki/Lowest_common_ancestor" target="_blank" rel="noopener">Lowest Common Ancestor</a></h2><p>the <strong>lowest common ancestor</strong> (<strong>LCA</strong>) of two nodes <em>v</em> and <em>w</em> in a tree or directed acyclic graph (DAG) <em>T</em> is <strong>the lowest (i.e. deepest) node</strong> that <strong>has both <em>v</em> and <em>w</em> as descendants</strong>, where we define each node to be a descendant of itself (so if <em>v</em> has a direct connection from <em>w</em>, <em>w</em> is the lowest common ancestor).</p>
<h3 id="Characteristics"><a href="#Characteristics" class="headerlink" title="Characteristics"></a>Characteristics</h3><ul>
<li>LCA(u)=u</li>
<li>LCA(u,v)=u, if and only if u is the ancestor of v</li>
<li>If u and v are not ancestor of each other, then they are separate in their lca’s son trees</li>
<li>LCA(A$\bigcup$B)=LCA(LCA(A),LCA(B))</li>
<li>u and v’s lea must be in the route from u to v(Shortest)</li>
</ul>
<h3 id="Realization-1"><a href="#Realization-1" class="headerlink" title="Realization"></a>Realization</h3><h4 id="Easier-way"><a href="#Easier-way" class="headerlink" title="Easier way"></a>Easier way</h4><p>Build a loop, and in the loop fInd the point which is deeper, and jump it to its father. When two points meet together, the poistion is their LCA.</p>
<h4 id="Faster-way"><a href="#Faster-way" class="headerlink" title="Faster way"></a>Faster way</h4><p>We premake a <code>fa[x][i]</code> array, and  <code>fa[x][i]</code> Means the 2^i^ ancestor for point x. We can make <code>fa[][]</code>array through dfs. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(dep[x]&lt;dep[y])swap(x,y);<span class="comment">//Let's make sure x deeper</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">19</span>; i&gt;=<span class="number">0</span>; i--) &#123; <span class="comment">//make x the same depth as y</span></span><br><span class="line">	   <span class="keyword">if</span>(dep[y]&lt;=dep[anc[x][i]]) x=anc[x][i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(x==y) <span class="keyword">return</span> x;<span class="comment">//Base on charastic, we find the lca</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">19</span>; i&gt;=<span class="number">0</span>; i--) &#123; <span class="comment">//Push up in the same time(If they are in the same depth)</span></span><br><span class="line">	   <span class="keyword">if</span>(anc[x][i]!=anc[y][i]) &#123;</span><br><span class="line">	      x=anc[x][i];</span><br><span class="line">	      y=anc[y][i];</span><br><span class="line">	    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> anc[x][<span class="number">0</span>];<span class="comment">//It must be lca</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">  anc[x][<span class="number">0</span>]=fa; <span class="comment">//Default: set fa as x's father</span></span><br><span class="line">	dep[x]=dep[fa]+<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; (<span class="number">1</span>&lt;&lt;i)&lt;=dep[x]; i++) &#123; </span><br><span class="line">	  anc[x][i]=anc[anc[x][i<span class="number">-1</span>]][i<span class="number">-1</span>];<span class="comment">//Calculate the ancestor </span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[x]; i; i=node[i].next ) &#123;</span><br><span class="line">	   <span class="keyword">int</span> j=node[i].d;</span><br><span class="line">	   <span class="keyword">if</span>(j!=fa) dfs(j, x);<span class="comment">//Recursion</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="The-centroid-of-the-tree"><a href="#The-centroid-of-the-tree" class="headerlink" title="The centroid of the tree"></a>The centroid of the tree</h3><h4 id="Defination"><a href="#Defination" class="headerlink" title="Defination"></a>Defination</h4><p>For a point in the tree, calculate its biggest son’s point number. For the point which has the smallest number. That should be the centroid.</p>
<h4 id="Characteristics-1"><a href="#Characteristics-1" class="headerlink" title="Characteristics"></a>Characteristics</h4><ul>
<li>When the root is the centroid, every son’s scale won’t be larger than half of the whole tree</li>
<li>When calculate the distance from every point to a single point, the centroid will be the smallest</li>
<li>Conecting two trees through an edge, then the new centroid will be on the route that conect two centroids.</li>
</ul>
<h4 id="Realization-2"><a href="#Realization-2" class="headerlink" title="Realization"></a>Realization</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getCentroid</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa)</span> </span>&#123;</span><br><span class="line">  siz[u] = <span class="number">1</span>;</span><br><span class="line">  wt[u] = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = head[u]; ~i; i = nxt[i]) &#123;</span><br><span class="line">    <span class="keyword">int</span> v = to[i];</span><br><span class="line">    <span class="keyword">if</span> (v != fa) &#123;</span><br><span class="line">      getCentroid(v, u);</span><br><span class="line">      siz[u] += siz[v];</span><br><span class="line">      wt[u] = <span class="built_in">max</span>(wt[u], siz[v]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  wt[u] = <span class="built_in">max</span>(wt[u], n - siz[u]);</span><br><span class="line">  <span class="keyword">if</span> (rt == <span class="number">0</span> || wt[u] &lt; wt[rt]) rt = u;  <span class="comment">// rt 为重心编号</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>So you might wonder how can we get size and father those kinds of information, and here is the most important method we are going to learn……</p>
<p>The alograthim I am going to talk about actually has no translation. So I just go with my Chinese……</p>
<p>接下来的内容没有英语翻译,所以我要开始说人话了</p>
<h2 id="树链剖分"><a href="#树链剖分" class="headerlink" title="树链剖分"></a>树链剖分</h2><h3 id="Concept"><a href="#Concept" class="headerlink" title="Concept"></a>Concept</h3><p>“树链” ，就是树上的路径。</p>
<p>“剖分”，就是把路径分类为<strong>重链</strong>和<strong>轻链</strong>。</p>
<p>常见的操作方式就是轻重剖分，这种方法能实现任意一点到根结点上的链的个数不超过logn条。</p>
<h3 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h3><p>记siz[v]表示以v为根的子树的节点数，dep[v]表示v的深度(根深度为1)，top[v]表示v所在的链的顶端节点，fa[v]表示v的父亲，son[v]表示与v在同一重链上的v的儿子节点（姑且称为<strong>重儿子</strong>）。 下图中圆圈内的数字表示树结点编号；加粗的边代表重链，反之则为轻链；树结点中带有小圆点的表示该条链所在链的顶端结点；</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/Data-Structure-Tree/%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86.png" alt=""></p>
<h3 id="叫法"><a href="#叫法" class="headerlink" title="叫法"></a>叫法</h3><p><strong>重儿子</strong>：siz[u]为v的子节点中siz值最大的，那么u就是v的重儿子。</p>
<p><strong>轻儿子</strong>：v的其它子节点。</p>
<p><strong>重边</strong>：点v与其重儿子的连边。</p>
<p><strong>轻边</strong>：点v与其轻儿子的连边。</p>
<p><strong>重链</strong>：由重边连成的路径。</p>
<p><strong>轻链：</strong>轻边。 </p>
<h3 id="Charastics"><a href="#Charastics" class="headerlink" title="Charastics"></a>Charastics</h3><ul>
<li><p>如果(v,u)为轻边，则siz[u] * 2 &lt; siz[v]</p>
</li>
<li><p>从根到某一点的路径上轻链、重链的个数都不大于logn </p>
</li>
</ul>
<h3 id="Realization-3"><a href="#Realization-3" class="headerlink" title="Realization"></a>Realization</h3><p>用两个dfs(可用bfs)来求出fa、dep、siz、son、top等信息；<br> dfs_1：</p>
<p>​    把 fa、dep、siz、son求出来，比较简单，略过</p>
<p>   dfs_2：</p>
<p>​    ⒈（重链）对于v，当son[v]存在（即v不是叶子节点）时，显然有top[son[v]] = top<a href="v的重儿子与v是在同一条重链上的">v</a>。继续 dfs_2(son[v])；</p>
<p>​    ⒉（轻链）对于v的各个轻儿子u，显然有top[u] = u，进行dfs_2(u)过程。<br>  这就求出了top。</p>
<p>这样就完成了轻重链划分，即树链剖分</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;<span class="comment">// siz、 son、 dep、fa</span></span><br><span class="line">   siz[u]=<span class="number">1</span>, son[u]=<span class="number">0</span>;<span class="comment">//记录顶点u的子节点个数及重儿子编号</span></span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">int</span> i=head[u]; i; i=eg[i].next)&#123;</span><br><span class="line">     <span class="keyword">int</span> v=eg[i].d;</span><br><span class="line">     <span class="keyword">if</span>(v!=fa[u])&#123;<span class="comment">//避免绕回</span></span><br><span class="line">        fa[v]=u;<span class="comment">//v的父结点是u</span></span><br><span class="line">        dep[v]=dep[u]+<span class="number">1</span>;<span class="comment">//v的深度=u的深度+1</span></span><br><span class="line">        dfs1(v);<span class="comment">//继续向下搜索</span></span><br><span class="line">        siz[u]+=siz[v]; <span class="comment">//u的儿子个数</span></span><br><span class="line">        <span class="keyword">if</span>(!son[u] || siz[v] &gt; siz[son[u]]) <span class="comment">//计算重儿子</span></span><br><span class="line">           son[u]=v;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> tp)</span></span>&#123;<span class="comment">//轻重链</span></span><br><span class="line">	top[u]=tp;</span><br><span class="line">	<span class="keyword">if</span>(son[u])dfs2(son[u], tp);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=eg[i].next)&#123;</span><br><span class="line">		<span class="keyword">int</span> v=eg[i].d;</span><br><span class="line">		<span class="keyword">if</span>(v!=fa[u]&amp;&amp;v!=son[u])dfs2(v,v);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Seems to be long, but when we slow down and coding it few more times, it would be easy for us to learn.</p>
<h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><h1 id="P3038-USACO11DEC-Grass-Planting-G"><a href="#P3038-USACO11DEC-Grass-Planting-G" class="headerlink" title="P3038 [USACO11DEC]Grass Planting G"></a>P3038 [USACO11DEC]Grass Planting G</h1><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>Farmer John has N barren pastures (2 &lt;= N &lt;= 100,000) connected by N-1 bidirectional roads, such that there is exactly one path between any two pastures. Bessie, a cow who loves her grazing time, often complains about how there is no grass on the roads between pastures. Farmer John loves Bessie very much, and today he is finally going to plant grass on the roads. He will do so using a procedure consisting of M steps (1 &lt;= M &lt;= 100,000).</p>
<p>At each step one of two things will happen:</p>
<ul>
<li>FJ will choose two pastures, and plant a patch of grass along each road in between the two pastures, or,</li>
<li>Bessie will ask about how many patches of grass on a particular road, and Farmer John must answer her question.</li>
</ul>
<p>Farmer John is a very poor counter – help him answer Bessie’s questions!</p>
<p>给出一棵n个节点的树，有m个操作，操作为将一条路径上的边权加一或询问某条边的权值。</p>
<h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>* Line 1: Two space-separated integers N and M</p>
<p>* Lines 2..N: Two space-separated integers describing the endpoints of a road.</p>
<p>* Lines N+1..N+M: Line i+1 describes step i. The first character of the line is either P or Q, which describes whether or not FJ is planting grass or simply querying. This is followed by two space-separated integers A_i and B_i (1 &lt;= A_i, B_i &lt;= N) which describe FJ’s action or query.</p>
<h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>* Lines 1..???: Each line has the answer to a query, appearing in the same order as the queries appear in the input.</p>
<h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">4 6 </span><br><span class="line">1 4 </span><br><span class="line">2 4 </span><br><span class="line">3 4 </span><br><span class="line">P 2 3 </span><br><span class="line">P 1 3 </span><br><span class="line">Q 3 4 </span><br><span class="line">P 1 4 </span><br><span class="line">Q 2 4 </span><br><span class="line">Q 1 4</span><br></pre></td></tr></table></figure>

<p><strong>输出 #1</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 </span><br><span class="line">1 </span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<h3 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mx=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,w[mx],head[mx],num_edge;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> v,nxt;</span><br><span class="line">&#125;eg[mx&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> fa,son,dep,top,<span class="built_in">size</span>,s,t;</span><br><span class="line">&#125;node[mx];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TREE</span>&#123;</span></span><br><span class="line">	TREE *lson,*rson;</span><br><span class="line">	<span class="keyword">int</span> l,r,mid,len;</span><br><span class="line">	<span class="keyword">int</span> num,lazy;</span><br><span class="line">&#125;tree[mx&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">typedef</span> TREE* Tree;</span><br><span class="line">Tree Root,now_node=tree;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> c=getchar();<span class="keyword">int</span> num=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(;!<span class="built_in">isdigit</span>(c);c=getchar())</span><br><span class="line">		<span class="keyword">if</span>(c==<span class="string">'P'</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">'Q'</span>) <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">for</span>(;<span class="built_in">isdigit</span>(c);c=getchar())</span><br><span class="line">		num=num*<span class="number">10</span>+c-<span class="string">'0'</span>;</span><br><span class="line">	<span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">	eg[++num_edge].v=v;</span><br><span class="line">	eg[num_edge].nxt=head[u];</span><br><span class="line">	head[u]=num_edge;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</span><br><span class="line">	node[u].<span class="built_in">size</span>=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u],v;i;i=eg[i].nxt)&#123;</span><br><span class="line">		v=eg[i].v;</span><br><span class="line">		<span class="keyword">if</span>(v==node[u].fa)</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		node[v].fa=u;</span><br><span class="line">		node[v].dep=node[u].dep+<span class="number">1</span>;</span><br><span class="line">		dfs1(v);</span><br><span class="line">		node[u].<span class="built_in">size</span>+=node[v].<span class="built_in">size</span>;</span><br><span class="line">		<span class="keyword">if</span>(node[v].<span class="built_in">size</span>&gt;node[node[u].son].<span class="built_in">size</span>)</span><br><span class="line">			node[u].son=v;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> bound;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> top)</span></span>&#123;</span><br><span class="line">	node[u].top=top;</span><br><span class="line">	node[u].s=++bound;</span><br><span class="line">	<span class="keyword">if</span>(node[u].son)&#123;</span><br><span class="line">		dfs2(node[u].son,top);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u],v;i;i=eg[i].nxt)&#123;</span><br><span class="line">			v=eg[i].v;</span><br><span class="line">			<span class="keyword">if</span>(v==node[u].son||v==node[u].fa)</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			dfs2(v,v);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	node[u].t=bound;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(Tree &amp;root,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">	root=++now_node;</span><br><span class="line">	root-&gt;l=l,root-&gt;r=r,root-&gt;mid=l+r&gt;&gt;<span class="number">1</span>,root-&gt;len=r-l+<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span>(l==r)<span class="keyword">return</span>;</span><br><span class="line">	build(root-&gt;lson,l,root-&gt;mid);</span><br><span class="line">	build(root-&gt;rson,root-&gt;mid+<span class="number">1</span>,r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(Tree root)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(root-&gt;lazy)&#123;</span><br><span class="line">		root-&gt;lson-&gt;lazy+=root-&gt;lazy;</span><br><span class="line">		root-&gt;rson-&gt;lazy+=root-&gt;lazy;</span><br><span class="line">		root-&gt;lson-&gt;num+=root-&gt;lson-&gt;len*root-&gt;lazy;</span><br><span class="line">		root-&gt;rson-&gt;num+=root-&gt;rson-&gt;len*root-&gt;lazy;</span><br><span class="line">		root-&gt;lazy=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(Tree root,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(root-&gt;l==l&amp;&amp;r==root-&gt;r)&#123;</span><br><span class="line">		root-&gt;num+=root-&gt;len;</span><br><span class="line">		root-&gt;lazy+=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	pushdown(root);</span><br><span class="line">	<span class="keyword">if</span>(r&lt;=root-&gt;mid)</span><br><span class="line">		update(root-&gt;lson,l,r);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(l&gt;root-&gt;mid)</span><br><span class="line">		update(root-&gt;rson,l,r);</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		update(root-&gt;lson,l,root-&gt;mid);</span><br><span class="line">		update(root-&gt;rson,root-&gt;mid+<span class="number">1</span>,r);</span><br><span class="line">	&#125;</span><br><span class="line">	root-&gt;num=root-&gt;lson-&gt;num+root-&gt;rson-&gt;num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(Tree root,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(root-&gt;l==l&amp;&amp;root-&gt;r==r)</span><br><span class="line">		<span class="keyword">return</span> root-&gt;num;</span><br><span class="line">	pushdown(root);</span><br><span class="line">	<span class="keyword">if</span>(r&lt;=root-&gt;mid)</span><br><span class="line">		<span class="keyword">return</span> query(root-&gt;lson,l,r);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(l&gt;root-&gt;mid)</span><br><span class="line">		<span class="keyword">return</span> query(root-&gt;rson,l,r);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> query(root-&gt;lson,l,root-&gt;mid)+query(root-&gt;rson,root-&gt;mid+<span class="number">1</span>,r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">Modify</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> fx=node[x].top,fy=node[y].top;</span><br><span class="line">	<span class="keyword">while</span>(fx!=fy)&#123;</span><br><span class="line">		<span class="keyword">if</span>(node[fx].dep&gt;node[fy].dep)&#123;</span><br><span class="line">			update(Root,node[fx].s,node[x].s);</span><br><span class="line">			x=node[fx].fa;</span><br><span class="line">			fx=node[x].top;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			update(Root,node[fy].s,node[y].s);</span><br><span class="line">			y=node[fy].fa;</span><br><span class="line">			fy=node[y].top;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(x!=y)&#123;</span><br><span class="line">		<span class="keyword">if</span>(node[x].dep&gt;node[y].dep)</span><br><span class="line">			update(Root,node[y].s+<span class="number">1</span>,node[x].s);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			update(Root,node[x].s+<span class="number">1</span>,node[y].s);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> fx=node[x].top,fy=node[y].top;</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(fx!=fy)&#123;</span><br><span class="line">		<span class="keyword">if</span>(node[fx].dep&gt;node[fy].dep)&#123;</span><br><span class="line">			ans+=query(Root,node[fx].s,node[x].s);</span><br><span class="line">			x=node[fx].fa;</span><br><span class="line">			fx=node[x].top;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			ans+=query(Root,node[fy].s,node[y].s);</span><br><span class="line">			y=node[fy].fa;</span><br><span class="line">			fy=node[y].top;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(x!=y)&#123;</span><br><span class="line">		<span class="keyword">if</span>(node[x].dep&gt;node[y].dep)</span><br><span class="line">			<span class="keyword">return</span> ans+query(Root,node[y].s+<span class="number">1</span>,node[x].s);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> ans+query(Root,node[x].s+<span class="number">1</span>,node[y].s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> opt,u,v;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	n=<span class="built_in">read</span>(),m=<span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;++i)&#123;</span><br><span class="line">		u=<span class="built_in">read</span>(),v=<span class="built_in">read</span>();</span><br><span class="line">		add_edge(u,v);</span><br><span class="line">		add_edge(v,u);</span><br><span class="line">	&#125;</span><br><span class="line">	dfs1(<span class="number">1</span>);</span><br><span class="line">	dfs2(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">	build(Root,<span class="number">1</span>,n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line">		opt=<span class="built_in">read</span>(),u=<span class="built_in">read</span>(),v=<span class="built_in">read</span>();</span><br><span class="line">		<span class="keyword">if</span>(opt==<span class="number">1</span>)</span><br><span class="line">			Modify(u,v);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,Query(u,v));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://mavericktang.github.io/Blogs/2020/02/23/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blogs/images/avatar.gif">
      <meta itemprop="name" content="Haotian Tang">
      <meta itemprop="description" content="Live without Barricades!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mavericreate.Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/Blogs/2020/02/23/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/" class="post-title-link" itemprop="url">爬取进击的巨人漫画</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-23 15:13:57" itemprop="dateCreated datePublished" datetime="2020-02-23T15:13:57-08:00">2020-02-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-11 20:07:58" itemprop="dateModified" datetime="2020-03-11T20:07:58-07:00">2020-03-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blogs/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>16k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>15 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="使用Scrapy爬取进击的巨人漫画"><a href="#使用Scrapy爬取进击的巨人漫画" class="headerlink" title="使用Scrapy爬取进击的巨人漫画"></a>使用Scrapy爬取进击的巨人漫画</h1><h2 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h2><p>​        自己看到网上有两个大牛分别爬取了<strong>合法</strong>(Naruto)与<strong>非法</strong>(<del>你懂的</del>)的漫画，十分感叹，便也想借鉴借鉴，结果大牛的的代码在博主的电脑上运行不了(<del>丧尽天良</del>),所以就只有自己写了一个算是结合版的代码，爬取了这个<a href="https://www.fzdm.com/" target="_blank" rel="noopener">网站</a>。在此分享给大家，授人以both🐟。</p>
<p>​        代码已经挂在GitHub上面了，想下漫画的可以滑到最下面观看下载方法，这个方法不仅可以下载进击的巨人，整个网站的漫画都可以爬，建议大家别乱改我设置的延迟，爬的太快了可能会被网站锁IP。</p>
<h2 id="二、环境准备"><a href="#二、环境准备" class="headerlink" title="二、环境准备"></a>二、环境准备</h2><p>博主的环境如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Mavericks-MacBook-Pro:~ maverick$</span><br><span class="line">Python 2.7.10 (default, Feb 22 2019, 21:55:15) </span><br><span class="line">Scrapy 1.8.0 - no active project</span><br></pre></td></tr></table></figure>

<p>在这里我默认大家都已经安装好了scrapy，<a href="https://www.osgeo.cn/scrapy/intro/install.html#intro-install" target="_blank" rel="noopener">传送门</a></p>
<p>不知道大家会遇到什么麻烦，博主只用了这一句代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install Scrapy</span><br></pre></td></tr></table></figure>

<h2 id="三、基础准备"><a href="#三、基础准备" class="headerlink" title="三、基础准备"></a>三、基础准备</h2><h3 id="Scrapy简介（大牛的文章）"><a href="#Scrapy简介（大牛的文章）" class="headerlink" title="Scrapy简介（大牛的文章）"></a>Scrapy简介（<a href="https://blog.csdn.net/c406495762/article/details/72858983" target="_blank" rel="noopener">大牛的文章</a>）</h3><pre><code>Scrapy Engine(Scrapy核心) 负责数据流在各个组件之间的流。Spiders(爬虫)发出Requests请求，经由Scrapy Engine(Scrapy核心) 交给Scheduler(调度器)，Downloader(下载器)Scheduler(调度器) 获得Requests请求，然后根据Requests请求，从网络下载数据。Downloader(下载器)的Responses响应再传递给Spiders进行分析。根据需求提取出Items，交给Item Pipeline进行下载。Spiders和Item Pipeline是需要用户根据响应的需求进行编写的。除此之外，还有两个中间件，Downloaders Mddlewares和Spider Middlewares，这两个中间件为用户提供方面，通过插入自定义代码扩展Scrapy的功能，例如去重等。</code></pre><p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/scrapy_architecture.png" alt="Scrapy"></p>
<h3 id="基本思路"><a href="#基本思路" class="headerlink" title="基本思路"></a>基本思路</h3><p>注意！这篇文章并不是official文章，一切还以<a href="https://www.osgeo.cn/scrapy/intro/tutorial.html" target="_blank" rel="noopener">官方教程</a>为准。这里只讲本次操作用到的知识。</p>
<ul>
<li>创建一个Scrapy项目；</li>
<li>定义提取的Item；</li>
<li>编写爬取网站的 spider 并提取 Item；</li>
<li>利用python自带的request库莱下载漫画</li>
</ul>
<h2 id="四、第二次准备"><a href="#四、第二次准备" class="headerlink" title="四、第二次准备"></a>四、第二次准备</h2><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject Titan</span><br></pre></td></tr></table></figure>

<p>然后我们可以观察项目内涉及的文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">|____Titan</span><br><span class="line">| |____.DS_Store</span><br><span class="line">| |____scrapy.cfg</span><br><span class="line">| |____Titan</span><br><span class="line">| | |____.DS_Store</span><br><span class="line">| | |____spiders</span><br><span class="line">| | | |____titan_spider.py</span><br><span class="line">| | | |______init__.py</span><br><span class="line">| | | |______pycache__</span><br><span class="line">| | | | |______init__.cpython-38.pyc</span><br><span class="line">| | | | |____titan_spider.cpython-38.pyc</span><br><span class="line">| | | | |____titan_spider.cpython-37.pyc</span><br><span class="line">| | | | |______init__.cpython-37.pyc</span><br><span class="line">| | |______init__.py</span><br><span class="line">| | |______pycache__</span><br><span class="line">| | | |______init__.cpython-38.pyc</span><br><span class="line">| | | |____settings.cpython-38.pyc</span><br><span class="line">| | | |____settings.cpython-37.pyc</span><br><span class="line">| | | |______init__.cpython-37.pyc</span><br><span class="line">| | |____middlewares.py</span><br><span class="line">| | |____settings.py</span><br><span class="line">| | |____items.py</span><br><span class="line">| | |____pipelines.py</span><br></pre></td></tr></table></figure>

<p>大部分都没啥用，重点是我们要在spider里面添加一个自己编写的python文件，可以是任意名字，像我就叫他巨人蜘蛛</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">titan_spider.py</span><br></pre></td></tr></table></figure>

<h3 id="创建spider类"><a href="#创建spider类" class="headerlink" title="创建spider类"></a>创建spider类</h3><p>创建一个用来实现具体爬取功能的类，我们所有的处理实现都会在这个类中进行，它必须为 <code>scrapy.Spider</code> 的子类。</p>
<p>在 <code>Titan/spiders</code> 文件路径下创建 <code>titan_spider.py</code> 文件。在里面就开始我们蜘蛛（<del>只猪</del>）的初始化</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment">#上面code是为了让其支持中文</span></span><br><span class="line"><span class="keyword">import</span> scrapy<span class="comment">#scrapy本尊</span></span><br><span class="line"><span class="keyword">import</span> re<span class="comment">#保存文件的library</span></span><br><span class="line"><span class="keyword">import</span> time<span class="comment">#设置延时</span></span><br><span class="line"><span class="keyword">import</span> requests<span class="comment">#从网络下载图片</span></span><br><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlretrieve</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TitanSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">	name = <span class="string">"titan"</span><span class="comment">#定义spider的名字</span></span><br><span class="line">	start_urls = [<span class="string">'https://manhua.fzdm.com/132/'</span>]<span class="comment">#起始页面</span></span><br><span class="line">	allowed_domains = [<span class="string">'https://manhua.fzdm.com'</span>,<span class="string">'http://p2.manhuapan.com/'</span>]<span class="comment">#允许范围</span></span><br><span class="line">  <span class="comment">#上面的名字都是official的名字千万别改</span></span><br></pre></td></tr></table></figure>

<h3 id="shell分析"><a href="#shell分析" class="headerlink" title="shell分析"></a>shell分析</h3><p>在command line里面输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy shell &#39;https:&#x2F;&#x2F;manhua.fzdm.com&#x2F;39&#39;</span><br></pre></td></tr></table></figure>

<p>然后你会得到这一堆东西（别🐦它）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">2020-02-23 20:14:47 [scrapy.utils.log] INFO: Scrapy 1.8.0 started (bot: scrapybot)</span><br><span class="line">2020-02-23 20:14:47 [scrapy.utils.log] INFO: Versions: lxml 4.4.2.0, libxml2 2.9.4, cssselect 1.1.0, parsel 1.5.2, w3lib 1.21.0, Twisted 19.10.0, Python 3.8.1 (v3.8.1:1b293b6006, Dec 18 2019, 14:08:53) - [Clang 6.0 (clang-600.0.57)], pyOpenSSL 19.1.0 (OpenSSL 1.1.1d  10 Sep 2019), cryptography 2.8, Platform macOS-10.14.6-x86_64-i386-64bit</span><br><span class="line">2020-02-23 20:14:47 [scrapy.crawler] INFO: Overridden settings: &#123;&#39;DUPEFILTER_CLASS&#39;: &#39;scrapy.dupefilters.BaseDupeFilter&#39;, &#39;LOGSTATS_INTERVAL&#39;: 0&#125;</span><br><span class="line">2020-02-23 20:14:47 [scrapy.extensions.telnet] INFO: Telnet Password: e3528447494d6c3d</span><br><span class="line">2020-02-23 20:14:47 [scrapy.middleware] INFO: Enabled extensions:</span><br><span class="line">...中间省略...</span><br><span class="line">[s] Available Scrapy objects:</span><br><span class="line">[s]   scrapy     scrapy module (contains scrapy.Request, scrapy.Selector, etc)</span><br><span class="line">[s]   crawler    &lt;scrapy.crawler.Crawler object at 0x10d0cd760&gt;</span><br><span class="line">[s]   item       &#123;&#125;</span><br><span class="line">[s]   request    &lt;GET https:&#x2F;&#x2F;manhua.fzdm.com&#x2F;39&gt;</span><br><span class="line">[s]   response   &lt;200 https:&#x2F;&#x2F;manhua.fzdm.com&#x2F;39&#x2F;&#x2F;&gt;</span><br><span class="line">[s]   settings   &lt;scrapy.settings.Settings object at 0x10d0cd460&gt;</span><br><span class="line">[s]   spider     &lt;DefaultSpider &#39;default&#39; at 0x10d573400&gt;</span><br><span class="line">[s] Useful shortcuts:</span><br><span class="line">[s]   fetch(url[, redirect&#x3D;True]) Fetch URL and update local objects (by default, redirects are followed)</span><br><span class="line">[s]   fetch(req)                  Fetch a scrapy.Request and update local objects </span><br><span class="line">[s]   shelp()           Shell help (print this help)</span><br><span class="line">[s]   view(response)    View response in a browser</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>然后我们就要使用xpath或者是css去寻找指定的页面内容（<del>奥利给干它</del>）</p>
<p>博主也学习了一些时间，建议各位去康康这个<a href="https://www.jianshu.com/p/489c5d21cdc7" target="_blank" rel="noopener">教程</a>(<del>求作者给广告费恰饭</del>)</p>
<p>理清思路，现在我们要找到各话的url，通过观察发现这些url都在<a>标签下</p>
<p>观察方法：鼠标右键然后点击inspect，再点一下左上角的选择器就可以查看页面元素的所在位置了</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/Inspect.png" alt="Inspect"></p>
<p>于是输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.xpath(&#39;&#x2F;&#x2F;li&#x2F;a[1]&#x2F;@href&#39;).extract()</span><br></pre></td></tr></table></figure>

<p>获取到所有符合这种特征的herf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; response.xpath(&#39;&#x2F;&#x2F;li&#x2F;a[1]&#x2F;@href&#39;).extract()</span><br><span class="line">[&#39;&#x2F;&#x2F;www.fzdm.com&#39;, &#39;&#x2F;&#x2F;news.fzdm.com&#39;, &#39;&#x2F;&#x2F;manhua.fzdm.com&#39;, &#39;126&#x2F;&#39;, &#39;125&#x2F;&#39;, &#39;124&#x2F;&#39;, &#39;123&#x2F;&#39;, &#39;122&#x2F;&#39;, &#39;121&#x2F;&#39;, &#39;120&#x2F;&#39;, &#39;119&#x2F;&#39;, &#39;118&#x2F;&#39;, &#39;117&#x2F;&#39;, &#39;116&#x2F;&#39;, &#39;qc65&#x2F;&#39;, &#39;115&#x2F;&#39;, &#39;qc64&#x2F;&#39;, &#39;114&#x2F;&#39;, &#39;qc63&#x2F;&#39;, &#39;113&#x2F;&#39;, &#39;qc62&#x2F;&#39;, &#39;112&#x2F;&#39;, &#39;前传61&#x2F;&#39;, &#39;111&#x2F;&#39;, &#39;前传60&#x2F;&#39;, &#39;110&#x2F;&#39;, &#39;前传59&#x2F;&#39;, &#39;109&#x2F;&#39;, &#39;108&#x2F;&#39;, &#39;前传57&#x2F;&#39;, &#39;107&#x2F;&#39;, &#39;前传56&#x2F;&#39;, &#39;106&#x2F;&#39;, &#39;前传55&#x2F;&#39;, &#39;105&#x2F;&#39;, &#39;前传54&#x2F;&#39;, &#39;104&#x2F;&#39;, &#39;103&#x2F;&#39;, &#39;102&#x2F;&#39;, &#39;qz51&#x2F;&#39;, &#39;101&#x2F;&#39;, &#39;100&#x2F;&#39;, &#39;qz49&#x2F;&#39;, &#39;99&#x2F;&#39;, &#39;qz48&#x2F;&#39;, &#39;98&#x2F;&#39;, &#39;qz47&#x2F;&#39;, &#39;97&#x2F;&#39;, &#39;thf46&#x2F;&#39;, &#39;096&#x2F;&#39;, &#39;wp45&#x2F;&#39;, &#39;95&#x2F;&#39;, &#39;qz44&#x2F;&#39;, &#39;94&#x2F;&#39;, &#39;qz43&#x2F;&#39;, &#39;93&#x2F;&#39;, &#39;qz42&#x2F;&#39;, &#39;92&#x2F;&#39;, &#39;qz41&#x2F;&#39;, &#39;91&#x2F;&#39;, &#39;qz40&#x2F;&#39;, &#39;qz40&#x2F;&#39;, &#39;qz39&#x2F;&#39;, &#39;qz38&#x2F;&#39;, &#39;90&#x2F;&#39;, &#39;89&#x2F;&#39;, &#39;88&#x2F;&#39;, &#39;qz37&#x2F;&#39;, &#39;87&#x2F;&#39;, &#39; before-the-fall-36&#x2F;&#39;, &#39;86&#x2F;&#39;, &#39;85&#x2F;&#39;, &#39;84&#x2F;&#39;, &#39;83&#x2F;&#39;, &#39;82&#x2F;&#39;, &#39;81&#x2F;&#39;, &#39;80&#x2F;&#39;, &#39;079&#x2F;&#39;, &#39;078&#x2F;&#39;, &#39;77&#x2F;&#39;, &#39;76&#x2F;&#39;, &#39;75&#x2F;&#39;, &#39;d74&#x2F;&#39;, &#39;73&#x2F;&#39;, &#39;72&#x2F;&#39;, &#39;71&#x2F;&#39;, &#39;70&#x2F;&#39;, &#39;69&#x2F;&#39;, &#39;d68&#x2F;&#39;, &#39;67&#x2F;&#39;, &#39;66&#x2F;&#39;, &#39;dxj52&#x2F;&#39;, &#39;65&#x2F;&#39;, &#39;64&#x2F;&#39;, &#39;63&#x2F;&#39;, &#39;62&#x2F;&#39;, &#39;61&#x2F;&#39;, &#39;60&#x2F;&#39;, &#39;59&#x2F;&#39;, &#39;wc08&#x2F;&#39;, &#39;58&#x2F;&#39;, &#39;wc07&#x2F;&#39;, &#39;qc07&#x2F;&#39;, &#39;57&#x2F;&#39;, &#39;wc06&#x2F;&#39;, &#39;56&#x2F;&#39;, &#39;qc06&#x2F;&#39;, &#39;55&#x2F;&#39;, &#39;54&#x2F;&#39;, &#39;wc04&#x2F;&#39;, &#39;53&#x2F;&#39;, &#39;wc02&#x2F;&#39;, &#39;52&#x2F;&#39;, &#39;wc01&#x2F;&#39;, &#39;51&#x2F;&#39;, &#39;50&#x2F;&#39;, &#39;wc00&#x2F;&#39;, &#39;49&#x2F;&#39;, &#39;xz&#x2F;&#39;, &#39;qc01&#x2F;&#39;, &#39;48&#x2F;&#39;, &#39;fwp&#x2F;&#39;, &#39;47&#x2F;&#39;, &#39;sgp&#x2F;&#39;, &#39;46&#x2F;&#39;, &#39;45&#x2F;&#39;, &#39;44&#x2F;&#39;, &#39;fwp02&#x2F;&#39;, &#39;fwp01&#x2F;&#39;, &#39;043&#x2F;&#39;, &#39;042&#x2F;&#39;, &#39;041&#x2F;&#39;, &#39;040&#x2F;&#39;, &#39;039&#x2F;&#39;, &#39;038&#x2F;&#39;, &#39;037&#x2F;&#39;, &#39;036&#x2F;&#39;, &#39;035&#x2F;&#39;, &#39;034&#x2F;&#39;, &#39;033&#x2F;&#39;, &#39;032&#x2F;&#39;, &#39;031&#x2F;&#39;, &#39;030&#x2F;&#39;, &#39;029&#x2F;&#39;, &#39;028&#x2F;&#39;, &#39;027&#x2F;&#39;, &#39;026&#x2F;&#39;, &#39;025&#x2F;&#39;, &#39;024&#x2F;&#39;, &#39;023&#x2F;&#39;, &#39;022&#x2F;&#39;, &#39;021&#x2F;&#39;, &#39;020&#x2F;&#39;, &#39;019&#x2F;&#39;, &#39;018&#x2F;&#39;, &#39;017&#x2F;&#39;, &#39;016&#x2F;&#39;, &#39;015&#x2F;&#39;, &#39;014&#x2F;&#39;, &#39;013&#x2F;&#39;, &#39;012&#x2F;&#39;, &#39;011&#x2F;&#39;, &#39;010&#x2F;&#39;, &#39;009&#x2F;&#39;, &#39;008&#x2F;&#39;, &#39;007&#x2F;&#39;, &#39;006&#x2F;&#39;, &#39;005&#x2F;&#39;, &#39;004&#x2F;&#39;, &#39;003&#x2F;&#39;, &#39;002&#x2F;&#39;, &#39;001&#x2F;&#39;]</span><br></pre></td></tr></table></figure>

<p>我们发现又有几个浑水<strong>摸鱼</strong>的url混了进来，不过咱们先把这个放在一边，等会在python里面用字符串操作把它们给筛掉（<del>博主不会一步找到正确url的方法qaq</del>），如果有更好的方法请大神指出（带我带我！）</p>
<p> 使用ctrl+d退出之前的shell，分析章节页面。这次我们需要找到图片的url以及下一页的url</p>
<h3 id="再次分析"><a href="#再次分析" class="headerlink" title="再次分析"></a>再次分析</h3><p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/Inspect2.png" alt="Inspect"></p>
<p>手动@风车动漫的广告商到我这里来把广告费结一下，【手动狗头】</p>
<p>这次我们找一下下一页的url（这个网站他图片的url放的比较日怪）</p>
<p>在command line里面输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy shell &#39;https:&#x2F;&#x2F;manhua.fzdm.com&#x2F;39&#x2F;&#x2F;126&#x2F;&#39;</span><br></pre></td></tr></table></figure>

<p>然后我们需要再次找到 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href&#x3D;&quot;index_0.html&quot; class&#x3D;&quot;pure-button button-success&quot;&gt;第1页&lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>

<p>然后老套路</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; response.xpath(&#39;&#x2F;&#x2F;a[contains(@href, &quot;index&quot;)]&#x2F;@href&#39;).extract()</span><br><span class="line">[&#39;index_0.html&#39;, &#39;index_1.html&#39;, &#39;index_2.html&#39;, &#39;index_3.html&#39;, &#39;index_4.html&#39;, &#39;index_5.html&#39;, &#39;index_6.html&#39;, &#39;index_1.html&#39;]</span><br></pre></td></tr></table></figure>

<p>我们知道最后一个url就是咱们的next page了</p>
<p><strong>但是！！！</strong></p>
<p>我们这么才能知道这一章什么时候结束呢？</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/Inspect3.png" alt="Inspect"></p>
<p>这是我们的最后一页的代码，看起来从url上一点头绪都没有，但是从旁边的文字上我们又有了新的线索，一般它会给出如：下一页这样的信息，最后一页则没有这样的信息，只要我们知道是否有“下一页”，我们就能知道是否为最后一页</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/last.png" alt="Inspect"></p>
<p>所以要获取上面的文字，使用如下方法：</p>
<p>请看第一页与最后一页的对比</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; response.xpath(&#39;&#x2F;&#x2F;a[contains(@href, &quot;index&quot;)]&#x2F;text()&#39;).extract()</span><br><span class="line">[&#39;第1页&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;下一页&#39;]</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; response.xpath(&#39;&#x2F;&#x2F;a[contains(@href, &quot;index&quot;)]&#x2F;text()&#39;).extract()</span><br><span class="line">[&#39;上一页&#39;, &#39;40&#39;, &#39;41&#39;, &#39;42&#39;, &#39;43&#39;, &#39;44&#39;, &#39;第45页&#39;]</span><br></pre></td></tr></table></figure>

<p>然后既然我们已经知道了判断下一页的方法，接下来就是获取图片链接了</p>
<h3 id="获取图片链接"><a href="#获取图片链接" class="headerlink" title="获取图片链接"></a>获取图片链接</h3><p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/pic.png" alt="Inspect"></p>
<p>再次选择我们找到了图片的url</p>
<p><strong>但是</strong>。。。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; response.xpath(&#39;&#x2F;&#x2F;img&#x2F;@src&#39;).extract()</span><br><span class="line">[&#39;https:&#x2F;&#x2F;static.fzdm.com&#x2F;css&#x2F;logo.png&#39;, &#39;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;fzdm&#x2F;st@75839ec8feb53ac89fe52134fc648a17bd1bd31f&#x2F;img&#x2F;loading.gif&#39;]</span><br></pre></td></tr></table></figure>

<p>woc居然找不到图片的url？？？</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/heirque.jpeg" alt="Inspect"></p>
<p>于是康康这个蜘蛛获取到的整个html代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; response.body</span><br><span class="line">b&#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv&#x3D;&quot;Content-Type&quot; content&#x3D;&quot;text&#x2F;html; charset&#x3D;utf-8&quot;&gt;&lt;meta http-equiv&#x3D;&quot;Content-Language&quot; content&#x3D;&quot;utf-8&quot;&gt;&lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;Edge,chrome&#x3D;1&quot;&gt;&lt;meta http-equiv&#x3D;&quot;x-dns-prefetch-control&quot; content&#x3D;&quot;on&quot;&gt;&lt;link rel&#x3D;&quot;dns-prefetch&quot; href&#x3D;&quot;&#x2F;&#x2F;www.fzdm.com&quot;&gt;&lt;link rel&#x3D;&quot;dns-prefetch&quot; href&#x3D;&quot;&#x2F;&#x2F;manhua.fzdm.com&quot;&gt;&lt;link rel&#x3D;&quot;dns-prefetch&quot; href&#x3D;&quot;&#x2F;&#x2F;p1.manhuapan.com&quot;&gt;&lt;link rel&#x3D;&quot;dns-prefetch&quot; href&#x3D;&quot;&#x2F;&#x2F;p2.manhuapan.com&quot;&gt;&lt;link rel&#x3D;&quot;dns-prefetch&quot; href&#x3D;&quot;&#x2F;&#x2F;p5.manhuapan.com&quot;&gt;&lt;link rel&#x3D;&quot;dns-prefetch&quot; href&#x3D;&quot;&#x2F;&#x2F;p17.manhuapan.com&quot;&gt;&lt;meta content&#x3D;&quot;all&quot; name&#x3D;&quot;robots&quot;&gt;&lt;title&gt;\xe8\xbf\x9b\xe5\x87\xbb\xe7\x9a\x84\xe5\xb7\xa8\xe4\xba\xba126\xe8\xaf\x9d </span><br><span class="line">……以下省略</span><br></pre></td></tr></table></figure>

<p>我们复制之后打开任意代码编译器然后<code>Command+f</code>寻找这个“2020/02/08055441539556.jpg”url在哪里。</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/pic2.png" alt="Inspect"></p>
<p>我们发现这个url放在javascript里面，使用<code>document.write()</code>。。。</p>
<p>你以为我有什么骚操作？？？</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/saocaozuo.gif" alt="Inspect"></p>
<p>我还真没有。。。</p>
<p>找到script</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; response.xpath(&#39;&#x2F;&#x2F;script&#x2F;text()&#39;).extract()</span><br><span class="line">[&quot;if (&#39;serviceWorker&#39; in navigator) &#123;\n      navigator.serviceWorker.register(&#39;&#x2F;sw.js&#39;, &#123; scope: &#39;&#x2F;&#39; &#125;).then(function (registration) &#123;\n        &#x2F;&#x2F; registration.unregister().then(function(boolean) &#123;\n        &#x2F;&#x2F; if boolean &#x3D; true, unregister is successful\n        &#x2F;&#x2F; &#125;);\n        &#x2F;&#x2F; 注册成功\n        &#x2F;*\n      var serviceWorker;\n      if (registration.installing) &#123;\n        console.log(&#39;installing&#39;);\n      &#125; else if (registration.waiting) &#123;\n        console.log(&#39;waiting&#39;);\n      &#125; else if (registration.active) &#123;\n        console.log(&#39;active&#39;);\n      &#125;\n      *&#x2F;\n        console.log(&#39;ServiceWorker registration successful with scope: &#39;, registration.scope);\n      &#125;).catch(function (err) &#123;\n        &#x2F;&#x2F; 注册失败 :(\n        console.log(&#39;ServiceWorker registration failed: &#39;, err);\n        let refreshing &#x3D; false\n        navigator.serviceWorker.addEventListener(&#39;controllerchange&#39;, () &#x3D;&gt; &#123;\n          if (refreshing) &#123;\n            return\n</span><br><span class="line">……以下省略</span><br></pre></td></tr></table></figure>

<p>于是我们获得了一个很大的array which有我们需要的url</p>
<p>博主是个铁憨憨，强行用python的正则表达式找到了这个url</p>
<p>正则表达式不会的可以走<a href="https://www.runoob.com/python/python-reg-expressions.html" target="_blank" rel="noopener">这里</a></p>
<p>在编程的时候，我们就先记录下这些script，然后再继续操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pre_img_url = response.xpath(<span class="string">'//script/text()'</span>).extract()<span class="comment">#记录script</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(pre_img_url)):<span class="comment">#记录的时候是以array存储的</span></span><br><span class="line">			matchObj = re.search( <span class="string">r'url=\"()\s*(.*)jpg'</span>, pre_img_url[i], re.M|re.I)<span class="comment">#正则表达式寻找</span></span><br><span class="line">			<span class="keyword">if</span> matchObj:</span><br><span class="line">				ppreimgurl = matchObj.group()<span class="comment">#里面就包含了我们要找的url（本例是“2020/02/08055441539556.jpg”）</span></span><br><span class="line">				img_url= <span class="string">'http://p2.manhuapan.com/'</span> + ppreimgurl[<span class="number">5</span>:len(ppreimgurl)]<span class="comment">#在前面加上存储图片的网址</span></span><br></pre></td></tr></table></figure>

<h2 id="五、开始编写"><a href="#五、开始编写" class="headerlink" title="五、开始编写"></a>五、开始编写</h2><p>还记得我们最开始的<code>parse()</code>吗？我们现在给他添加一点东西</p>
<p>解释都在代码里面</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">		link_urls = response.xpath(<span class="string">'//li/a[1]/@href'</span>).extract()<span class="comment">#找到各话的url</span></span><br><span class="line">		names = response.xpath(<span class="string">'//li/a[1]/@title'</span>).extract()<span class="comment">#找到各话的名字，方便命名文件夹</span></span><br><span class="line">    <span class="comment"># 下面的variable可以不管</span></span><br><span class="line">		x=<span class="number">-1</span></span><br><span class="line">		h=<span class="number">0</span></span><br><span class="line">		comics_url_list = []</span><br><span class="line">		rnames = []</span><br><span class="line">		base = <span class="string">'https://manhua.fzdm.com/132/'</span></span><br><span class="line">		<span class="keyword">for</span> i <span class="keyword">in</span> range(len(link_urls)):</span><br><span class="line">			h=bool(re.search(<span class="string">r'\d'</span>, link_urls[i]))</span><br><span class="line">			<span class="keyword">if</span>(h==<span class="literal">True</span>):</span><br><span class="line">				x=x+<span class="number">1</span></span><br><span class="line">				name=names[x]</span><br><span class="line">				url=base + link_urls[i]<span class="comment">#它的url只有base后面的部分，所以要把base加上</span></span><br><span class="line">				rnames.append(name)<span class="comment">#将各话的名字加入一个新的array</span></span><br><span class="line">				comics_url_list.append(url)<span class="comment">#将url加入array</span></span><br><span class="line"><span class="comment">#				print("%s :https://www.manhuadui.com %s"%(names[4+x],link_urls[i]))</span></span><br><span class="line"><span class="comment">#				print("%s : %s"%(rnames[x],comics_url_list[x]))	</span></span><br><span class="line">				</span><br><span class="line">		print(<span class="string">'\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; current page comics list &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;'</span>)</span><br><span class="line">		print(comics_url_list)</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span> url <span class="keyword">in</span> comics_url_list:</span><br><span class="line">			<span class="keyword">yield</span> scrapy.Request(url=url, callback=self.comics_parse, dont_filter=<span class="literal">True</span>)<span class="comment">#通过特殊的scrapy传递将url传到下一个函数对下一层网页进行爬取</span></span><br><span class="line">      <span class="comment">#一定要加入dont_filter=True，不然会出bug（不进入下个函数）</span></span><br><span class="line">			print(<span class="string">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;  parse comics:'</span> + url)</span><br></pre></td></tr></table></figure>

<p>接下来我们编写<code>comics_parse(self, response)</code>函数来处理各话的url</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">comics_parse</span><span class="params">(self, response)</span>:</span><span class="comment">#另一个函数爬取下层页面</span></span><br><span class="line">		pre_img_url = response.xpath(<span class="string">'//script/text()'</span>).extract()<span class="comment">#获取script</span></span><br><span class="line">		img_url = <span class="string">''</span></span><br><span class="line">		ptitle=response.xpath(<span class="string">'//title/text()'</span>).extract()<span class="comment">#获取章节名称</span></span><br><span class="line">		prepage_num=response.xpath(<span class="string">'//a[contains(@href, "index")]/text()'</span>).extract()<span class="comment">#获取页面名字</span></span><br><span class="line">		page_num=<span class="string">''</span></span><br><span class="line">		a=<span class="number">0</span></span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,len(prepage_num)):<span class="comment">#寻找page number来作为文件名</span></span><br><span class="line">			<span class="keyword">for</span> _char <span class="keyword">in</span> prepage_num[j]:<span class="comment">#判断中文字符来找到当前页码（它会是“第n页”）</span></span><br><span class="line">				<span class="keyword">if</span> <span class="string">'\u4e00'</span> &lt;= _char &lt;= <span class="string">'\u9fa5'</span>:</span><br><span class="line">					page_num=prepage_num[j]</span><br><span class="line">					<span class="keyword">if</span> page_num == <span class="string">'下一页'</span>:<span class="comment">#如果是‘下一页’叫表示它漏过了‘第一页’</span></span><br><span class="line">						page_num=<span class="string">'第1页'</span></span><br><span class="line">					a=<span class="number">1</span></span><br><span class="line">					<span class="keyword">break</span></span><br><span class="line">			<span class="keyword">if</span>(a==<span class="number">1</span>):</span><br><span class="line">				<span class="keyword">break</span>	 </span><br><span class="line">		t=ptitle[<span class="number">0</span>]</span><br><span class="line">		index=ptitle[<span class="number">0</span>].find(<span class="string">'话'</span>)<span class="comment">#通过找到‘话’来找到章节的名字</span></span><br><span class="line">		title=t[<span class="number">0</span>:(index+<span class="number">1</span>)]<span class="comment">#截取章节名字</span></span><br><span class="line"><span class="comment">#		matchObj = re.search( r'url=\"()\s*(.*)jpg', line, re.M|re.I)</span></span><br><span class="line"> 	 <span class="keyword">for</span> i <span class="keyword">in</span> range(len(pre_img_url)):<span class="comment">#记录的时候是以array存储的      </span></span><br><span class="line">   		matchObj = re.search( <span class="string">r'url=\"()\s*(.*)jpg'</span>, pre_img_url[i], re.M|re.I)<span class="comment">#正则表达式寻找      </span></span><br><span class="line">    	<span class="keyword">if</span> matchObj:        </span><br><span class="line">      	ppreimgurl = matchObj.group()<span class="comment">#里面就包含了我们要找的url（本例是“2020/02/08055441539556.jpg”）        img_url= 'http://p2.manhuapan.com/' + ppreimgurl[5:len(ppreimgurl)]#在前面加上存储图片的网址</span></span><br><span class="line">				self.log(<span class="string">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;开始下载&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;'</span>)</span><br><span class="line"><span class="comment">#				self.save_img(page_num[len(page_num)], title, img_url)</span></span><br><span class="line">				document = <span class="string">'/Users/maverick/Desktop/test/One punch'</span></span><br><span class="line">				comics_path = document + <span class="string">'/'</span> + title</span><br><span class="line">				exists = os.path.exists(comics_path)</span><br><span class="line">				<span class="keyword">if</span> <span class="keyword">not</span> exists:<span class="comment">#如果没有创建过文件夹</span></span><br><span class="line"><span class="comment">#					self.log('create document: ' + title)</span></span><br><span class="line">					os.makedirs(comics_path)</span><br><span class="line">				pic_name = comics_path + <span class="string">'/'</span> + page_num + <span class="string">'.jpg'</span></span><br><span class="line">				exists = os.path.exists(pic_name)</span><br><span class="line">				<span class="keyword">if</span> <span class="keyword">not</span> exists:</span><br><span class="line">					time.sleep(<span class="number">0.1</span>)<span class="comment">#延时防止锁ip</span></span><br><span class="line">					urlretrieve(img_url, pic_name)<span class="comment">#下载图片</span></span><br><span class="line">				<span class="keyword">break</span>		</span><br><span class="line">		pages_urls = response.xpath(<span class="string">'//a[contains(@href, "index")]/@href'</span>).extract()<span class="comment">#找到下一页的url</span></span><br><span class="line">		page_situation = response.xpath(<span class="string">'//a[contains(@href, "index")]/text()'</span>).extract()<span class="comment">#与是否为最后一页有关</span></span><br><span class="line">		ans=<span class="number">0</span></span><br><span class="line">		<span class="keyword">for</span> _char <span class="keyword">in</span> page_situation[len(page_situation)<span class="number">-1</span>]:<span class="comment">#还是通过中文来判断是否为最后一页</span></span><br><span class="line">			<span class="keyword">if</span> <span class="keyword">not</span> <span class="string">'\u4e00'</span> &lt;= _char &lt;= <span class="string">'\u9fa5'</span>:</span><br><span class="line">				ans=<span class="number">1</span></span><br><span class="line">		<span class="keyword">if</span>(ans==<span class="number">0</span>):</span><br><span class="line">			premyfront = response.request.url<span class="comment">#找到当前页面的url，再通过字符串操作得到基础页</span></span><br><span class="line">			fenge = premyfront.split(<span class="string">'/'</span>)</span><br><span class="line">			myfont=<span class="string">''</span></span><br><span class="line">			<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">				myfont=myfont+fenge[i]+<span class="string">'/'</span></span><br><span class="line">			next_page = myfont+pages_urls[len(pages_urls)<span class="number">-1</span>]<span class="comment">#得到下一页</span></span><br><span class="line">			self.log(next_page)</span><br><span class="line">			<span class="keyword">yield</span> scrapy.Request(next_page, callback=self.comics_parse, dont_filter=<span class="literal">True</span>)	<span class="comment">#递归自己</span></span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			self.log(<span class="string">'parse comics:'</span> + title + <span class="string">'finished.'</span>)</span><br></pre></td></tr></table></figure>

<p>然后我们就可以欣赏它爬取的漫画了。因为整个网站的机制是一样的，所以我们只需要修改url地址，就可以任意爬取自己想看的漫画了。</p>
<h2 id="五、后记"><a href="#五、后记" class="headerlink" title="五、后记"></a>五、后记</h2><p>如果是自己想用的话，代码已经在<a href="https://github.com/MaverickTang/Attack-on-titan-download" target="_blank" rel="noopener">GitHub</a>上面了，下载下来就可以直接用。</p>
<p>不仅是巨人，这个爬虫还可以爬取整个网站上的其他漫画，比如：</p>
<p>一拳超人，火影忍者，海贼王,鬼灭之刃等。</p>
<p>请求星星✨</p>
<p>使用terminalcd到根目录然后运行以下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl titan</span><br></pre></td></tr></table></figure>

<p>记得把保存的本机地址还有想爬取的漫画地址改一下</p>
<p>当然只要编程的速度够快，这种下载速度绝对比某网盘快得多，最关键的是方便并且可以装B。。。</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/xiazai.gif" alt="Inspect"></p>
<p>放上自己爬到的兵长帅照哈哈哈哈哈</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/%E7%88%AC%E5%8F%96%E8%BF%9B%E5%87%BB%E7%9A%84%E5%B7%A8%E4%BA%BA%E6%BC%AB%E7%94%BB/%E7%AC%AC1%E9%A1%B5.jpg" alt="Inspect"></p>
<h2 id="六、参考链接及版权说明"><a href="#六、参考链接及版权说明" class="headerlink" title="六、参考链接及版权说明"></a>六、参考链接及版权说明</h2><p>博主是第一次写博客，如果侵权请联系我删除，还有对两个大佬写的博客表示诚挚感谢，链接第一与第二个为两个大佬的博客。</p>
<p>参考链接：</p>
<p>1(合法).<a href="https://blog.csdn.net/c406495762/article/details/72858983" target="_blank" rel="noopener">https://blog.csdn.net/c406495762/article/details/72858983</a></p>
<p>2(非法).<a href="https://moshuqi.github.io/2016/09/27/Python爬虫-Scrapy框架/" target="_blank" rel="noopener">https://moshuqi.github.io/2016/09/27/Python%E7%88%AC%E8%99%AB-Scrapy%E6%A1%86%E6%9E%B6/</a></p>
<p>3(正则表达式).<a href="https://www.runoob.com/python/python-reg-expressions.html" target="_blank" rel="noopener">https://www.runoob.com/python/python-reg-expressions.html</a></p>
<p>4(xpath与css学习).<a href="https://www.jianshu.com/p/489c5d21cdc7" target="_blank" rel="noopener">https://www.jianshu.com/p/489c5d21cdc7</a></p>
<p>5(下载图片方法).<a href="https://morvanzhou.github.io/tutorials/data-manipulation/scraping/3-02-download/" target="_blank" rel="noopener">https://morvanzhou.github.io/tutorials/data-manipulation/scraping/3-02-download/</a></p>
<p>6(进击的巨人在线观看).<a href="https://manhua.fzdm.com/39/" target="_blank" rel="noopener">https://manhua.fzdm.com/39/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mavericktang.github.io/Blogs/2020/02/15/Graph%20theory/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blogs/images/avatar.gif">
      <meta itemprop="name" content="Haotian Tang">
      <meta itemprop="description" content="Live without Barricades!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mavericreate.Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/Blogs/2020/02/15/Graph%20theory/" class="post-title-link" itemprop="url">Graph theory</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-15 18:32:35" itemprop="dateCreated datePublished" datetime="2020-02-15T18:32:35-08:00">2020-02-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-17 11:31:07" itemprop="dateModified" datetime="2020-02-17T11:31:07-08:00">2020-02-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blogs/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>26k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>24 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Graph-theory-in-Computer-competition"><a href="#Graph-theory-in-Computer-competition" class="headerlink" title="Graph theory in Computer competition"></a><strong>Graph theory</strong> in Computer competition</h1><h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>Graph theory is prabobly the most popular question in computer competition in USACO and NOIP(China). It is actually a branch of math theory. In the questions they would give you many points in a graph and ask you to find out the shortest way or the possile way to go from one point to another one. Sometimes it will provide you with values of the edge and ask you to calculate the smallest coast. Sounds pretty simple Hahhhhh. Let’s have a look!</p>
<h2 id="Basic-Information"><a href="#Basic-Information" class="headerlink" title="Basic Information"></a>Basic Information</h2><p><strong>PS</strong>: You can jump to next block and keep reading, and find the concept you don’t understand above.</p>
<p><strong>Graph</strong> is a <a href="https://en.wikipedia.org/wiki/Tuple" target="_blank" rel="noopener">2-tuple</a> which describes the relationship between the points. Usually explained as G=(V,E), and V, E are mutiple sets.</p>
<p>Graph has two different types:</p>
<p><strong>Undirected graph</strong>: Every elements in E are disordered 2-tuple(u,v), we name the element <strong>Undirected edge</strong>. And u,v$\in$V. Let e=(u,v), then u and v are e’s <strong>endpoint</strong></p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/Undirected.png" alt="**Undirected graph**"></p>
<p><strong>Directed graph</strong>: Every elements in E are ordered 2-tuple, write as u$\longrightarrow$v, we name the element <strong>Directed edge</strong>.  Let e=u$\longrightarrow$v, then u is e’s <strong>Tail</strong>, and v is e’s <strong>head</strong>.</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/Directed.png" alt="**directed graph**"></p>
<p>And for every elements in V, we call it <strong>Vertex</strong> or <strong>Node</strong>.</p>
<p>…….</p>
<p>Actually there is a lot more concept we need to know for the Graph Theory, but we are just programmers(<del>I don’t want to write down</del>) Here is the link for <a href="https://oi-wiki.org/graph/concept/" target="_blank" rel="noopener">More basic info</a>.</p>
<h2 id="Restore-the-graph"><a href="#Restore-the-graph" class="headerlink" title="Restore the graph!"></a>Restore the graph!</h2><p>After we study the basic information, know we need to know how to restore those information about a graph in our computer.</p>
<p>There are three ways we use to restore graphs.</p>
<p>But to make it easy(<del>I have no idea how to use the other two</del>), I will only show the one that is most easy(<del>Even can be mastered by the damn author</del>)</p>
<p>Actually, Forward star can widely use on different kind of graphs, this is the main reason I introduce it.</p>
<h3 id="Forward-Star"><a href="#Forward-Star" class="headerlink" title="Forward Star"></a>Forward Star</h3><p>We first use Struct to store the information about the graph.</p>
<p>We need to restore the basic info in the graph. Based on <strong>edge</strong>. So here are the info we need to restore in the <a href="http://www.cplusplus.com/doc/tutorial/structures/" target="_blank" rel="noopener">struct</a>:  The value of the edge, the point the edge go to, the next edge.</p>
<p>So here is the code:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span></span><br><span class="line">       <span class="keyword">int</span> dest;<span class="comment">//destination</span></span><br><span class="line">       <span class="keyword">int</span> val;<span class="comment">//edge's value</span></span><br><span class="line">       <span class="keyword">int</span> next;<span class="comment">//next edge</span></span><br><span class="line">  &#125;eg[mx*<span class="number">2</span>];<span class="comment">//mx is the numer of the edges, if it is undirected you need to double</span></span><br><span class="line"><span class="keyword">int</span> n,m;<span class="comment">//nomber of point in the graph，number of edge in the graph </span></span><br><span class="line"><span class="keyword">int</span> head[MAX]=&#123;<span class="number">0</span>&#125;;<span class="comment">//The head in the graph</span></span><br><span class="line"><span class="keyword">int</span> top=<span class="number">0</span>;<span class="comment">//The exact number of the edeges</span></span><br></pre></td></tr></table></figure>



<p>Then we add the data into the struct</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addedge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> val)</span></span>&#123; </span><br><span class="line">    eg[++top].dest=v;<span class="comment">//v is the tail of the edge(destination)</span></span><br><span class="line">    eg[top].val=val;<span class="comment">//edge's value</span></span><br><span class="line">    eg[top].next=head[u];<span class="comment">//next edge's number</span></span><br><span class="line">    head[u]=top;<span class="comment">//Remeber this edge as another edge for the head u.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>And here is the code in main function:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> u,v,val,i;</span><br><span class="line">   <span class="built_in">scanf</span>(“%d%d”,&amp;n,&amp;m);</span><br><span class="line">   <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=m;i++)<span class="comment">//input the numer of edges</span></span><br><span class="line">     <span class="built_in">scanf</span>(“%d%d%d”,&amp;u,&amp;v,&amp;val);<span class="comment">//input the head, tail, and value</span></span><br><span class="line">     addedge(u,v,val);<span class="comment">//directed graph</span></span><br><span class="line">     <span class="comment">//addedge(v,u,val);//If it is undirected graph</span></span><br><span class="line">   &#125;</span><br><span class="line">.....<span class="comment">//Other code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This way we make the restorage logical and easy. Then we can actually do something with the theory.</p>
<h2 id="Graph-traversal"><a href="#Graph-traversal" class="headerlink" title="Graph traversal"></a><a href="https://en.wikipedia.org/wiki/Graph_traversal" target="_blank" rel="noopener">Graph traversal</a></h2><p>Find the relationship between two points in a graph can be seen as travel in the graph. And we need to know the basic how to travel through the whole graph.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">travel</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;<span class="comment">//Starting point</span></span><br><span class="line">	<span class="keyword">for</span>(i=head[s]; i ; i=eg[i].next)&#123;</span><br><span class="line">       <span class="built_in">printf</span>(“%d-&gt;%d=%d\n”,</span><br><span class="line">       s,eg[i].dest,eg[i].val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>But this kind of method is slow and do not fit most of the situation. We need some spcial methods.</p>
<p>Then here are two big basic alograithm for Graph theory.</p>
<h2 id="DFS"><a href="#DFS" class="headerlink" title="DFS"></a>DFS</h2><p>DFS,  full name <a href="https://en.wikipedia.org/wiki/Depth-first_search" target="_blank" rel="noopener">Depth First Search</a>.</p>
<p>To make it easy, the core of it is to follow one road till it is going to an end. We travel through every edges as long as the edge can be traveled through.</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/DFS.png" alt=""></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> vis[mx]=&#123;<span class="number">0</span>&#125;;<span class="comment">//To make sure you won't travel through the same edge over and over again</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">	vis[s]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[s];i;i=eg[i].next)&#123;<span class="comment">//travel</span></span><br><span class="line">		<span class="keyword">if</span>(!vis[eg[i].dest])&#123;<span class="comment">//haven't travel through</span></span><br><span class="line">			dfs(eg[i].dest);<span class="comment">//Then travel</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Simple as this. </p>
<p>With the core of the dfs, we can solve some problems easily.</p>
<h3 id="USACO06DEC-Cow-Picnic"><a href="#USACO06DEC-Cow-Picnic" class="headerlink" title="[USACO06DEC] Cow Picnic"></a>[USACO06DEC] Cow Picnic</h3><h4 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h4><p>The cows are having a picnic! Each of Farmer John’s <em>K</em> (1 ≤ <em>K</em> ≤ 100) cows is grazing in one of <em>N</em> (1 ≤ <em>N</em> ≤ 1,000) pastures, conveniently numbered 1…<em>N</em>. The pastures are connected by <em>M</em> (1 ≤ <em>M</em> ≤ 10,000) one-way paths (no path connects a pasture to itself).</p>
<p>The cows want to gather in the same pasture for their picnic, but (because of the one-way paths) some cows may only be able to get to some pastures. Help the cows out by figuring out how many pastures are reachable by all cows, and hence are possible picnic locations.</p>
<h4 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h4><p>Line 1: Three space-separated integers, respectively: <em>K</em>, <em>N</em>, and <em>M</em><br>Lines 2..<em>K</em>+1: Line <em>i</em>+1 contains a single integer (1..<em>N</em>) which is the number of the pasture in which cow <em>i</em> is grazing.<br>Lines <em>K</em>+2..<em>M</em>+<em>K</em>+1: Each line contains two space-separated integers, respectively <em>A</em> and <em>B</em> (both 1..<em>N</em> and <em>A</em> != <em>B</em>), representing a one-way path from pasture <em>A</em> to pasture <em>B</em>.</p>
<h4 id="output"><a href="#output" class="headerlink" title="output"></a>output</h4><p>Line 1: The single integer that is the number of pastures that are reachable by all cows via the one-way paths.</p>
<h4 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h4><p>Input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">2 4 4</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">1 2</span><br><span class="line">1 4</span><br><span class="line">2 3</span><br><span class="line">3 4</span><br></pre></td></tr></table></figure>

<p>Output </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<h4 id="Solution"><a href="#Solution" class="headerlink" title="Solution:"></a>Solution:</h4><p>Dfs search every cows, use field[i] express the numer i field have been tracel through how many times, if field[i]=k then meet the standard(Means every cow has traveled through here).</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mx=<span class="number">10005</span>;<span class="comment">//As the question given</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> dest,next;<span class="comment">//No value given</span></span><br><span class="line">&#125;eg[mx];</span><br><span class="line"><span class="keyword">int</span> head[mx],top=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> vis[mx],field[<span class="number">1005</span>],cow[<span class="number">105</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addedge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">	eg[++top].dest=v,eg[top].next=head[u],head[u]=top;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">	vis[s]=<span class="number">1</span>;field[s]++;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[s];i;i=eg[i].next)&#123;</span><br><span class="line">		<span class="keyword">if</span>(!vis[eg[i].dest])&#123;</span><br><span class="line">			dfs(eg[i].dest);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> k,m,n,ans=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);<span class="comment">//Speed up cin and cout</span></span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;k&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;cow[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">		<span class="keyword">int</span> u,v;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;u&gt;&gt;v;</span><br><span class="line">		addedge(u, v);<span class="comment">//Directed graph</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;<span class="comment">//Put vis back to 0 again</span></span><br><span class="line">			vis[j]=<span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		dfs(cow[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(field[i]==k)ans++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;ans;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h2><p>BFS, full name <strong>Breadth First Search</strong></p>
<p>BFS is a traversing algorithm where you should start traversing from a selected node (source or starting node) and traverse the graph layerwise thus exploring the neighbour nodes (nodes which are directly connected to source node). You must then move towards the next-level neighbour nodes.</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/BFS.png" alt=""></p>
<p>Code:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;//Import queue libaray</span></span></span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;<span class="comment">//Declare queue</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">	q.push(s);vis[s]=<span class="number">1</span>;<span class="comment">//push s into the queue and vis</span></span><br><span class="line">	<span class="keyword">while</span>(!q.empty())&#123;<span class="comment">//As long as there is still elements in the queue</span></span><br><span class="line">		<span class="keyword">int</span> u=q.front();<span class="comment">//Get the front of the queue</span></span><br><span class="line">		q.pop();<span class="comment">//Get the front of the queue out</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=eg[i].next)&#123;<span class="comment">//Same old story</span></span><br><span class="line">			<span class="keyword">int</span> v=eg[i].dest;</span><br><span class="line">			<span class="keyword">if</span>(!vis[v])&#123;</span><br><span class="line">				q.push(v),vis[v]=<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Example</p>
<h3 id="USACO14DEC-Piggy-Back"><a href="#USACO14DEC-Piggy-Back" class="headerlink" title="[USACO14DEC] Piggy Back"></a>[USACO14DEC] Piggy Back</h3><h4 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h4><p>Bessie and her sister Elsie graze in different fields during the day, and in the evening they both want to walk back to the barn to rest. Being clever bovines, they come up with a plan to minimize the total amount of energy they both spend while walking.</p>
<p>Bessie spends B units of energy when walking from a field to an adjacent field, and Elsie spends E units of energy when she walks to an adjacent field. However, if Bessie and Elsie are together in the same field, Bessie can carry Elsie on her shoulders and both can move to an adjacent field while spending only P units of energy (where P might be considerably less than B+E, the amount Bessie and Elsie would have spent individually walking to the adjacent field). If P is very small, the most energy-efficient solution may involve Bessie and Elsie traveling to a common meeting field, then traveling together piggyback for the rest of the journey to the barn. Of course, if P is large, it may still make the most sense for Bessie and Elsie to travel</p>
<p>separately. On a side note, Bessie and Elsie are both unhappy with the term “piggyback”, as they don’t see why the pigs on the farm should deserve all the credit for this remarkable form of</p>
<p>transportation.</p>
<p>Given B, E, and P, as well as the layout of the farm, please compute the minimum amount of energy required for Bessie and Elsie to reach the barn.</p>
<h4 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h4><p>INPUT: (file piggyback.in)</p>
<p>The first line of input contains the positive integers B, E, P, N, and M. All of these are at most 40,000. B, E, and P are described above. N is the number of fields in the farm (numbered 1..N, where N &gt;= 3), and M is the number of connections between fields. Bessie and Elsie start in fields 1 and 2, respectively. The barn resides in field N.</p>
<p>The next M lines in the input each describe a connection between a pair of different fields, specified by the integer indices of the two fields. Connections are bi-directional. It is always possible to travel from field 1 to field N, and field 2 to field N, along a series of such connections.</p>
<h4 id="output-1"><a href="#output-1" class="headerlink" title="output"></a>output</h4><p>OUTPUT: (file piggyback.out)</p>
<p>A single integer specifying the minimum amount of energy Bessie and</p>
<p>Elsie collectively need to spend to reach the barn. In the example</p>
<p>shown here, Bessie travels from 1 to 4 and Elsie travels from 2 to 3</p>
<p>to 4. Then, they travel together from 4 to 7 to 8.</p>
<h4 id="Sample-1"><a href="#Sample-1" class="headerlink" title="Sample"></a>Sample</h4><p>Input:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">4 4 5 8 8 </span><br><span class="line">1 4 </span><br><span class="line">2 3 </span><br><span class="line">3 4 </span><br><span class="line">4 7 </span><br><span class="line">2 5 </span><br><span class="line">5 6 </span><br><span class="line">6 8 </span><br><span class="line">7 8</span><br></pre></td></tr></table></figure>

<p>Output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">22</span><br></pre></td></tr></table></figure>

<h4 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution:"></a>Solution:</h4><p>Because the shortest distance from one point to the destination is unchangable, so we don’t have to consider two of them meet together and depart. If B<em>+</em>E*&lt;=<em>P , then we should keep them being together；<br>If B</em>+<em>E &gt;*P</em> Then they’d better be apart.<br>So we only need to run bfs from 1,2,n. And get the shortest length. After we enumerate the points they will be together, we are done.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mx=<span class="number">40005</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> dest,next;</span><br><span class="line">&#125;eg[mx];</span><br><span class="line"><span class="keyword">int</span> head[mx],top=<span class="number">0</span>,vis[<span class="number">3</span>][mx],dis[<span class="number">3</span>][mx];<span class="comment">//dis[][]is used to memorize the distance</span></span><br><span class="line"><span class="keyword">int</span> b,e,p,n,m,u,v;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addedge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;<span class="comment">//Same old story</span></span><br><span class="line">	eg[++top].dest=v;</span><br><span class="line">	eg[top].next=head[u];</span><br><span class="line">	head[u]=top;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(s==<span class="number">0</span>) vis[s][<span class="number">1</span>]=<span class="number">1</span>,q.push(<span class="number">1</span>);<span class="comment">//</span></span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(s==<span class="number">1</span>) vis[s][<span class="number">2</span>]=<span class="number">1</span>,q.push(<span class="number">2</span>);</span><br><span class="line">	<span class="keyword">else</span> vis[s][n]=<span class="number">1</span>,q.push(n);</span><br><span class="line">	<span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">		<span class="keyword">int</span> u=q.front();q.pop();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=eg[i].next)&#123;</span><br><span class="line">			<span class="keyword">int</span> v=eg[i].dest;</span><br><span class="line">			<span class="keyword">if</span>(!vis[s][v])&#123;</span><br><span class="line">				dis[s][v]=dis[s][u]+<span class="number">1</span>;<span class="comment">//The distance to the head=the distance to the tail + 1</span></span><br><span class="line">				q.push(v);</span><br><span class="line">				vis[s][v]=<span class="number">1</span>;	</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;b&gt;&gt;e&gt;&gt;p&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;u&gt;&gt;v;</span><br><span class="line">		addedge(u,v);</span><br><span class="line">		addedge(v, u);<span class="comment">//undirected graph</span></span><br><span class="line">	&#125;</span><br><span class="line">	bfs(<span class="number">0</span>);</span><br><span class="line">	bfs(<span class="number">1</span>);</span><br><span class="line">	bfs(<span class="number">2</span>);</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">1e9</span>;<span class="comment">//Put ans to largest int, or it will be hard to replace with new value</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">		ans=<span class="built_in">min</span>(ans, dis[<span class="number">0</span>][i]*b+dis[<span class="number">1</span>][i]*e+dis[<span class="number">2</span>][i]*p);<span class="comment">//As the question said</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;ans;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="More-advanced-Algotithm"><a href="#More-advanced-Algotithm" class="headerlink" title="More advanced Algotithm"></a>More advanced Algotithm</h2><h3 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h3><p>It uses the idea of BFS, aims to solve the Shortest path problem. It works both well for Directed graph and undirected graph.  </p>
<p>The point of Djikstra is be greedy. We declare an array to restore the distance from the starting point to another point, initialize them as infinite number if there is no direct edge from starting point to them, and if they do have, put them as the smae value as the value of the edge .So that we can replace them with smaller number which we gained from the value of the route. As the graph.</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/Djk.gif" alt=""></p>
<p>Dijkstra has Time complexity 𝑂(n^2), but with heap, it can be 𝑂((𝑛+𝑚)log2𝑛)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span><span class="comment">//Declare another struct to restore the information for the point</span></span><br><span class="line">	<span class="keyword">int</span> dis,pos;<span class="comment">//pos means the number of the point</span></span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span> &lt;( <span class="keyword">const</span> node &amp;x )<span class="keyword">const</span>&#123;<span class="comment">//declare the operator '&lt;' by our own function</span></span><br><span class="line">		<span class="keyword">return</span> x.dis &lt; dis;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">std</span>::priority_queue&lt;node&gt; q;<span class="comment">//priority queue</span></span><br><span class="line"><span class="keyword">int</span> dis[mx],vis[mx];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">	dis[s]=<span class="number">0</span>;</span><br><span class="line">	q.push((node)&#123;<span class="number">0</span>,s&#125;);<span class="comment">//push into queue as struct node</span></span><br><span class="line">	<span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">		node tmp=q.top();q.pop();</span><br><span class="line">		<span class="keyword">int</span> x=tmp.pos,d=tmp.dis;</span><br><span class="line">		<span class="keyword">if</span>(!vis[x])&#123;<span class="comment">//Got to the tail, if we didn't visit it</span></span><br><span class="line">		vis[x]=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=eg[i].next)&#123;</span><br><span class="line">			<span class="keyword">int</span> y=eg[i].dest;</span><br><span class="line">			<span class="keyword">if</span>(dis[y]&gt;dis[x]+eg[i].val)&#123;</span><br><span class="line">				dis[y]=dis[x]+eg[i].val;<span class="comment">//The core of the code, to replace for smaller</span></span><br><span class="line">				<span class="keyword">if</span>(!vis[y])<span class="comment">//Got to the head, if we didn't visit it</span></span><br><span class="line">					q.push((node)&#123;dis[y],y&#125;);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="USACO19DEC-Milk-Pumping-G"><a href="#USACO19DEC-Milk-Pumping-G" class="headerlink" title="[USACO19DEC]Milk Pumping G"></a>[USACO19DEC]Milk Pumping G</h3><h4 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h4><p>Farmer John has recently purchased a new farm to expand his milk production empire. The new farm is connected to a nearby town by a network of pipes, and FJ wants to figure out the best set of these pipes to purchase for his use in pumping milk from the farm to the town.</p>
<p>The network of pipes is described by NN junction points (endpoints of pipes), conveniently numbered 1…N1…N (2≤N≤10002≤N≤1000). Junction point 1 represents FJ’s farm and junction point NN is the town. There are MM bi-directional pipes (1≤M≤10001≤M≤1000), each joining a pair of junction points. The iith pipe costs cici dollars for FJ to purchase for his use, and can support a flow rate of fifi liters of milk per second.</p>
<p>FJ wants to purchase a single path worth of pipes, where the endpoints of the path are junctions 1 and NN. The cost of the path is the sum of the costs of the pipes along the path. The flow rate along the path is the minimum of the flow rates of the pipes along the path (since this serves as a bottleneck for the flow traveling down the path). FJ wants to maximize the flow rate of the path divided by the cost of the path. It is guaranteed that a path from 11 to NN exists.</p>
<h4 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h4><p>The first line of input contains NN and M.M. Each of the following MM lines describes a pipe in terms of four integers: aa and bb (the two different junctions connected by the pipe), cc (its cost), and ff (its flow rate). Cost and flow rate are both positive integers in the range 1…10001…1000.</p>
<h4 id="output-2"><a href="#output-2" class="headerlink" title="output"></a>output</h4><p>Please print 106106 times the optimal solution value, truncated to an integer (that is, rounded down to the next-lowest integer if this number is not itself an integer).</p>
<h4 id="Sample-2"><a href="#Sample-2" class="headerlink" title="Sample"></a>Sample</h4><p>Input:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3 2</span><br><span class="line">2 1 2 4</span><br><span class="line">2 3 5 3</span><br></pre></td></tr></table></figure>

<p>Output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">428571</span><br></pre></td></tr></table></figure>

<h4 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution:"></a>Solution:</h4><p>Just enumerate the biggest flow from 1 to 1000, and calculate for the smallest cost.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mx=<span class="number">2010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> dest,val,next,flow;</span><br><span class="line">&#125;eg[mx*<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> head[mx],top=<span class="number">0</span>,vis[mx],dis[mx];</span><br><span class="line"><span class="keyword">int</span> n,m,ans=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addedge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> val,<span class="keyword">int</span> flow)</span></span>&#123;<span class="comment">//Same old story</span></span><br><span class="line">	eg[++top].dest=v;</span><br><span class="line">	eg[top].val=val;</span><br><span class="line">	eg[top].flow=flow;</span><br><span class="line">	eg[top].next=head[u];</span><br><span class="line">	head[u]=top;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dij</span><span class="params">(<span class="keyword">int</span> flow)</span></span>&#123;</span><br><span class="line">	  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)dis[i]=INF,vis[i]=<span class="number">0</span>;<span class="comment">//Initialize dis and vis</span></span><br><span class="line">			dis[<span class="number">1</span>]=<span class="number">0</span>,vis[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">			q.push(<span class="number">1</span>);</span><br><span class="line">			<span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">				<span class="keyword">int</span> u=q.front();q.pop();vis[u]=<span class="number">0</span>;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=eg[i].next)&#123;</span><br><span class="line">					<span class="keyword">if</span>(eg[i].flow&lt;flow)<span class="keyword">continue</span>;<span class="comment">//Means we have already enumerated</span></span><br><span class="line">					<span class="keyword">int</span> t=eg[i].dest;</span><br><span class="line">					<span class="keyword">if</span>(dis[u]+eg[i].val&lt;dis[t])&#123;<span class="comment">//Everything can change, the core never change</span></span><br><span class="line">						dis[t]=dis[u]+eg[i].val;</span><br><span class="line">						<span class="keyword">if</span>(!vis[t])&#123;</span><br><span class="line">							vis[t]=<span class="number">1</span>;</span><br><span class="line">							q.push(t);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(dis[n]!=INF)ans=<span class="built_in">max</span>(ans,flow*<span class="number">1000000</span>/dis[n]);<span class="comment">//We got to the end, see if we can replace</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">		<span class="keyword">int</span> a,b,c,d;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c&gt;&gt;d;</span><br><span class="line">		addedge(a, b, c, d);</span><br><span class="line">		addedge(b, a, c, d);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">1000</span>;i++)<span class="comment">//from 1 to 1000 enumerate the smallest flow</span></span><br><span class="line">	dij(i);</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;ans;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h3><p>It solve the Shortest path problem between two points, unlike Dijkstra, Floyd allow us to deal with the edge which has negative value. But Floyd take more time complexity(O(n^3)). So we have to be careful about it.</p>
<p>Like Dijkstra, Floyd’s core is also enumerate. It enumerate every point by 3 for loops. Because we suppose there is a shorter way than directly get to the point. We use g[i] [j] to express the distance from i to j, so there might be a point k in between might make this case:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g[i][j]&gt;g[i][k]+g[k][j];</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/Floyd.png" alt=""></p>
<p>I think it is easier to understand by code:(Probably the shortest one you ever meet)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">floyd</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(g[i][k]&lt;inf&amp;&amp;g[k][j]&lt;inf&amp;&amp;g[i][j]&gt;g[i][k]+g[k][j])</span><br><span class="line">					g[i][j]=g[i][k]+g[k][j];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="USACO09DEC-Cow-Toll-Paths"><a href="#USACO09DEC-Cow-Toll-Paths" class="headerlink" title="[USACO09DEC]Cow Toll Paths"></a>[USACO09DEC]Cow Toll Paths</h3><h4 id="Description-3"><a href="#Description-3" class="headerlink" title="Description"></a>Description</h4><p>Like everyone else, FJ is always thinking up ways to increase his revenue. To this end, he has set up a series of tolls that the cows will pay when they traverse the cowpaths throughout the farm.</p>
<p>The cows move from any of the N (1 &lt;= N &lt;= 250) pastures conveniently numbered 1..N to any other pasture over a set of M (1 &lt;= M &lt;= 10,000) bidirectional cowpaths that connect pairs of different pastures A_j and B_j (1 &lt;= A_j &lt;= N; 1 &lt;= B_j &lt;= N). FJ has assigned a toll L_j (1 &lt;= L_j &lt;= 100,000) to the path connecting pastures A_j and B_j.</p>
<p>While there may be multiple cowpaths connecting the same pair of pastures, a cowpath will never connect a pasture to itself. Best of all, a cow can always move from any one pasture to any other pasture by following some sequence of cowpaths.</p>
<p>In an act that can only be described as greedy, FJ has also assigned a toll C_i (1 &lt;= C_i &lt;= 100,000) to every pasture. The cost of moving from one pasture to some different pasture is the sum of the tolls for each of the cowpaths that were traversed plus a <em>single additional toll</em> that is the maximum of all the pasture tolls encountered along the way, including the initial and destination pastures.</p>
<p>The patient cows wish to investigate their options. They want you to write a program that accepts K (1 &lt;= K &lt;= 10,000) queries and outputs the minimum cost of trip specified by each query. Query i is a pair of numbers s_i and t_i (1 &lt;= s_i &lt;= N; 1 &lt;= t_i &lt;= N; s_i != t_i) specifying a starting and ending pasture.</p>
<p>Consider this example diagram with five pastures:</p>
<p>The ‘edge toll’ for the path from pasture 1 to pasture 2 is 3. Pasture 2’s ‘node toll’ is 5.</p>
<p>To travel from pasture 1 to pasture 4, traverse pastures 1 to 3 to 5 to 4. This incurs an edge toll of 2+1+1=4 and a node toll of 4 (since pasture 5’s toll is greatest), for a total cost of 4+4=8.</p>
<p>The best way to travel from pasture 2 to pasture 3 is to traverse pastures 2 to 5 to 3. This incurs an edge toll of 3+1=4 and a node toll of 5, for a total cost of 4+5=9.</p>
<h4 id="Input-3"><a href="#Input-3" class="headerlink" title="Input"></a>Input</h4><p>* Line 1: Three space separated integers: N, M, and K</p>
<p>* Lines 2..N+1: Line i+1 contains a single integer: C_i</p>
<p>* Lines N+2..N+M+1: Line j+N+1 contains three space separated</p>
<p>integers: A_j, B_j, and L_j</p>
<p>* Lines N+M+2..N+M+K+1: Line i+N+M+1 specifies query i using two space-separated integers: s_i and t_i</p>
<h4 id="output-3"><a href="#output-3" class="headerlink" title="output"></a>output</h4><p>* Lines 1..K: Line i contains a single integer which is the lowest cost of any route from s_i to t_i</p>
<h4 id="Sample-3"><a href="#Sample-3" class="headerlink" title="Sample"></a>Sample</h4><p>Input:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">5 7 2 </span><br><span class="line">2 </span><br><span class="line">5 </span><br><span class="line">3 </span><br><span class="line">3 </span><br><span class="line">4 </span><br><span class="line">1 2 3 </span><br><span class="line">1 3 2 </span><br><span class="line">2 5 3 </span><br><span class="line">5 3 1 </span><br><span class="line">5 4 1 </span><br><span class="line">2 4 3 </span><br><span class="line">3 4 4 </span><br><span class="line">1 4 </span><br><span class="line">2 3</span><br></pre></td></tr></table></figure>

<p>Output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">8 </span><br><span class="line">9</span><br></pre></td></tr></table></figure>

<h4 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution:"></a>Solution:</h4><p>N so small and asking so many. Definally Floyd. We use two arries <strong>dis</strong>[][] and <strong>dist</strong>[][] to memorize the value of the edges alone and the value of the edges add with the value of points. We enumerate the value of points from small to big for point k, then the last k we enumerate should have the biggest point value from a to b. And we compare it with i and j’s value we then get the biggest point value. Then we are done.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;//memset</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;//For sort</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,k,dis[<span class="number">300</span>][<span class="number">300</span>],dist[<span class="number">300</span>][<span class="number">300</span>],c[<span class="number">300</span>];<span class="comment">//dis without point value, dist is with</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> d,id;</span><br><span class="line">&#125;x[<span class="number">300</span>];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span></span>&#123;<span class="comment">//use in the sort function</span></span><br><span class="line">	<span class="keyword">if</span>(a.d==b.d)</span><br><span class="line">		<span class="keyword">return</span> a.id&lt;b.id;</span><br><span class="line">	<span class="keyword">return</span> a.d&lt;b.d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">floyd</span><span class="params">()</span></span>&#123;<span class="comment">//Same old story</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">				<span class="keyword">if</span>(i==j) <span class="keyword">continue</span>;</span><br><span class="line">				dis[i][j]=<span class="built_in">min</span>(dis[i][j],dis[i][k]+dis[k][j]);<span class="comment">//Our original Floyd</span></span><br><span class="line">				dist[i][j]=<span class="built_in">min</span>(dist[i][j],dis[i][j]+<span class="built_in">max</span>(x[k].d,<span class="built_in">max</span>(x[i].d,x[j].d)));<span class="comment">//As said in the question</span></span><br><span class="line">			&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;k;</span><br><span class="line">	<span class="built_in">memset</span>(dis,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dis));</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;x[i].d;</span><br><span class="line">		x[i].id=i;</span><br><span class="line">		dis[i][i]=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	sort(x+<span class="number">1</span>,x+<span class="number">1</span>+n,cmp);<span class="comment">//sort by the value of point</span></span><br><span class="line">	<span class="keyword">int</span> origin[<span class="number">300</span>];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)origin[x[i].id]=i;<span class="comment">//question will ask the origin number, let's memorize it</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">		<span class="keyword">int</span> a,b,c;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br><span class="line">		dis[origin[a]][origin[b]]=dis[origin[b]][origin[a]]=<span class="built_in">min</span>(dis[origin[b]][origin[a]],c);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dist));</span><br><span class="line">	floyd();</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line">	<span class="keyword">int</span> a,b;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;(dist[origin[a]][origin[b]])&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="SPFA"><a href="#SPFA" class="headerlink" title="SPFA"></a>SPFA</h3><p>SPFA, full name <strong>Shortest Path Faster Algorithm</strong>.</p>
<p>Sounds pretty cool Hahhh. Actually, I think it is the most useful algorithm for graph theory, it can deal with almost all kinds of graph. Now, let’s see how it works!</p>
<p>It works by repeatedly selecting a vertex and using it to relax, if possible, all of its neighbors. If a node was successfully relaxed, then it might in turn be necessary to use it to relax other vertices, and hence it is marked for consideration also. Once there are no vertices left to be considered, the algorithm terminates. Note that a vertex might be considered several times during the course of the algorithm. The usual implementation strategy is to use a <a href="http://wcipeg.com/wiki/Queue" target="_blank" rel="noopener">queue</a> to hold the vertices that might be considered next.</p>
<p><img src="https://raw.githubusercontent.com/MaverickTang/Images/master/SPFA.gif" alt=""></p>
<p>Code:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> u,v;    <span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dist));<span class="comment">//Initialize dist</span></span><br><span class="line">	dist[s]=<span class="number">0</span>;<span class="comment">//Get start point as 0</span></span><br><span class="line">	inque[s]=<span class="number">1</span>;<span class="comment">//Memorize the s is in the queue</span></span><br><span class="line">	q.push(s);<span class="comment">//in queue</span></span><br><span class="line">	<span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">		u=q.front(), q.pop();  inque[u]=<span class="number">0</span>;<span class="comment">//Get the front of queue out</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u]; i; i=eg[i].next)&#123;</span><br><span class="line">			  v=eg[i].dest;</span><br><span class="line">			  <span class="keyword">if</span>(dist[v]&gt;dist[u]+eg[i].val)&#123;<span class="comment">//If find a route with smaller value</span></span><br><span class="line">				  dist[v]= dist[u]+eg[i].val;<span class="comment">//change it </span></span><br><span class="line">				  fa[v]=u;<span class="comment">//Memorize the tail of v</span></span><br><span class="line">				  <span class="keyword">if</span>(!inque[v])&#123;</span><br><span class="line">					  q.push(v), inque[v]=<span class="number">1</span>;</span><br><span class="line">				  &#125;</span><br><span class="line">			  &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>We see that spfa is pretty similar to Dijkstra. let me use the core code to express the difference.</p>
<h4 id="Difference-between-Dij-heap-and-SPFA"><a href="#Difference-between-Dij-heap-and-SPFA" class="headerlink" title="Difference between Dij+heap and SPFA!!!"></a>Difference between Dij+heap and SPFA!!!</h4><p>Dij:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">  <span class="comment">//If priority queue is not empty</span></span><br><span class="line">		node tmp=q.top();q.pop();</span><br><span class="line">  <span class="comment">//get top out</span></span><br><span class="line">		<span class="keyword">int</span> x=tmp.pos,d=tmp.dis;</span><br><span class="line">		<span class="keyword">if</span>(!vis[x])&#123;<span class="comment">//Got to the tail, if we didn't visit it</span></span><br><span class="line">		vis[x]=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=eg[i].next)&#123;</span><br><span class="line">			<span class="keyword">int</span> y=eg[i].dest;</span><br><span class="line">			<span class="keyword">if</span>(dis[y]&gt;dis[x]+eg[i].val)&#123;</span><br><span class="line">        <span class="comment">//Relax</span></span><br><span class="line">				dis[y]=dis[x]+eg[i].val;<span class="comment">//The core of the code, to replace for smaller</span></span><br><span class="line">				<span class="keyword">if</span>(!vis[y])<span class="comment">//Got to the head, if we didn't visit it</span></span><br><span class="line">					q.push((node)&#123;dis[y],y&#125;);</span><br><span class="line">        <span class="comment">//New distance and new point into the queue</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>SPFA:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">   <span class="comment">//if regular queue is not empty</span></span><br><span class="line">	u=q.front(), q.pop();  inque[u]=<span class="number">0</span>;<span class="comment">//Get the front of queue out</span></span><br><span class="line">   <span class="comment">//Get top out</span></span><br><span class="line">   <span class="comment">//And Remember!!!</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u]; i; i=eg[i].next)&#123;</span><br><span class="line">		  v=eg[i].dest;</span><br><span class="line">		  <span class="keyword">if</span>(dist[v]&gt;dist[u]+eg[i].val)&#123;<span class="comment">//If find a route with smaller value</span></span><br><span class="line">         <span class="comment">//Relax</span></span><br><span class="line">			  dist[v]= dist[u]+eg[i].val;<span class="comment">//change it </span></span><br><span class="line">			  fa[v]=u;<span class="comment">//Memorize the tail of v</span></span><br><span class="line">			  <span class="keyword">if</span>(!inque[v])&#123;</span><br><span class="line">           <span class="comment">//the points that are Relaxed but not in queue get into the queue</span></span><br><span class="line">				  q.push(v), inque[v]=<span class="number">1</span>;</span><br><span class="line">			  &#125;</span><br><span class="line">		  &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>So the difference is clear enough:</p>
<p>Dji+heap: <strong>Small root pile</strong>, every time get the shortest distance, for this point, the shortest distance <strong>won’t change</strong>! </p>
<p>SPFA: Use <strong>queue</strong>. Get the front out of queue, might be renew in the future, it is <strong>won’t be always the same</strong>. </p>
<h3 id="USACO14OPEN-Dueling-GPS’s"><a href="#USACO14OPEN-Dueling-GPS’s" class="headerlink" title="[USACO14OPEN]Dueling GPS’s"></a>[USACO14OPEN]Dueling GPS’s</h3><h4 id="Description-4"><a href="#Description-4" class="headerlink" title="Description"></a>Description</h4><p>Farmer John has recently purchased a new car online, but in his haste he accidentally clicked the “Submit” button twice when selecting extra features for the car, and as a result the car ended up equipped with two GPS navigation systems! Even worse, the two systems often make conflicting decisions about the route that FJ should take.</p>
<p>The map of the region in which FJ lives consists of N intersections (2 &lt;= N &lt;= 10,000) and M directional roads (1 &lt;= M &lt;= 50,000). Road i connects intersections A_i (1 &lt;= A_i &lt;= N) and B_i (1 &lt;= B_i &lt;= N). Multiple roads could connect the same pair of intersections, and a bi-directional road (one permitting two-way travel) is represented by two separate directional roads in opposite orientations. FJ’s house is located at intersection 1, and his farm is located at intersection N. It is possible to reach the farm from his house by traveling along a series of directional roads.</p>
<p>Both GPS units are using the same underlying map as described above; however, they have different notions for the travel time along each road. Road i takes P_i units of time to traverse according to the first GPS unit, and Q_i units of time to traverse according to the second unit (each travel time is an integer in the range 1..100,000).</p>
<p>FJ wants to travel from his house to the farm. However, each GPS unit complains loudly any time FJ follows a road (say, from intersection X to intersection Y) that the GPS unit believes not to be part of a shortest route from X to the farm (it is even possible that both GPS units can complain, if FJ takes a road that neither unit likes).</p>
<p>Please help FJ determine the minimum possible number of total complaints he can receive if he chooses his route appropriately. If both GPS units complain when FJ follows a road, this counts as +2 towards the total.</p>
<h4 id="Input-4"><a href="#Input-4" class="headerlink" title="Input"></a>Input</h4><p>* Line 1: The integers N and M.</p>
<p>Line i describes road i with four integers: A_i B_i P_i Q_i.</p>
<h4 id="output-4"><a href="#output-4" class="headerlink" title="output"></a>output</h4><p>* Line 1: The minimum total number of complaints FJ can receive if he routes himself from his house to the farm optimally.</p>
<h4 id="Sample-4"><a href="#Sample-4" class="headerlink" title="Sample"></a>Sample</h4><p>Input:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">5 7 </span><br><span class="line">3 4 7 1 </span><br><span class="line">1 3 2 20 </span><br><span class="line">1 4 17 18 </span><br><span class="line">4 5 25 3 </span><br><span class="line">1 2 10 1 </span><br><span class="line">3 5 4 14 </span><br><span class="line">2 4 6 5</span><br></pre></td></tr></table></figure>

<p>Output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>

<h4 id="Solution-4"><a href="#Solution-4" class="headerlink" title="Solution:"></a>Solution:</h4><p>At first we need to know the shortest path for both GPS. And we need to know every point’s distance from the end point n, there is no way we need to use other alogrithm, we can just run sofa from n. How can we calculate how many time the GPS complained? We can simplely enumerate every edge, to see if its value is equal to the head and tail’s shortest length, and use dist[] to memorize how many time will the GPS complain if we across this route. Then we creat a new map based on this dist[], and spfa find the smallest path.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mx=<span class="number">100005</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">0x3f3f3f</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="comment">//Same old story</span></span><br><span class="line">	<span class="keyword">int</span> next,dest,val;</span><br><span class="line">&#125;eg[<span class="number">4</span>][mx];</span><br><span class="line"><span class="keyword">int</span> n,m,head[<span class="number">4</span>][mx],top=<span class="number">0</span>,a,b,p,h;<span class="comment">//We need three maps</span></span><br><span class="line"><span class="keyword">int</span> dist[<span class="number">100005</span>];<span class="keyword">bool</span> vis[<span class="number">100005</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addedge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> val,<span class="keyword">int</span> mode)</span></span>&#123;<span class="comment">//Same old story just have double the array</span></span><br><span class="line">	eg[mode][top].next=head[mode][u];eg[mode][top].dest=v;</span><br><span class="line">	eg[mode][top].val=val;head[mode][u]=top;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> mode)</span></span>&#123;</span><br><span class="line">		<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">		<span class="built_in">memset</span>(dist,<span class="number">0x7f</span>,<span class="keyword">sizeof</span>(dist));</span><br><span class="line">		<span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line">		q.push(s);</span><br><span class="line">		vis[s]=<span class="literal">true</span>;</span><br><span class="line">		dist[s]=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">			<span class="keyword">int</span> u=q.front();</span><br><span class="line">			q.pop();</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=head[mode][u];i;i=eg[mode][i].next)&#123;</span><br><span class="line">				<span class="keyword">if</span>(dist[eg[mode][i].dest]&gt;dist[u]+eg[mode][i].val)&#123;</span><br><span class="line">					dist[eg[mode][i].dest]=dist[u]+eg[mode][i].val;</span><br><span class="line">					<span class="keyword">if</span> (!vis[eg[mode][i].dest])&#123;</span><br><span class="line">						q.push(eg[mode][i].dest);</span><br><span class="line">						vis[eg[mode][i].dest]=<span class="number">1</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			vis[u]=<span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//The important part of this question</span></span><br><span class="line">		<span class="keyword">if</span>(mode==<span class="number">3</span>) <span class="built_in">cout</span>&lt;&lt;dist[n];</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;<span class="comment">//enumerate every points</span></span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> j=head[mode][i];j;j=eg[mode][j].next)&#123;</span><br><span class="line">					<span class="keyword">if</span> (dist[i]+eg[mode][j].val==dist[eg[mode][j].dest])&#123;</span><br><span class="line">						eg[<span class="number">3</span>][j].val--;<span class="comment">//For edges in the shortest path, renew it</span></span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">	<span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">		top++;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;p&gt;&gt;h;</span><br><span class="line">		addedge(b,a,p,<span class="number">1</span>);</span><br><span class="line">		addedge(b,a,h,<span class="number">2</span>);</span><br><span class="line">		addedge(a,b,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	spfa(n,<span class="number">1</span>);</span><br><span class="line">	spfa(n,<span class="number">2</span>);</span><br><span class="line">	spfa(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In this blog we studied DFS, BFS, Dijkstra, Floyd, and SPFA. They have their own advantages so we need to use them properly in competition. Here are a chart about each. Hopefully this woould be helpful to you.</p>
<h4 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h4><table>
<thead>
<tr>
<th align="center">Shortest-PathsProblem</th>
<th align="center">Sparse Graph</th>
<th align="center">Dense Graph</th>
<th align="center">With negative value</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Single-Source</td>
<td align="center">Dijkstra+heap</td>
<td align="center">SPFA/Dijkstra+heap</td>
<td align="center">SPFA</td>
</tr>
<tr>
<td align="center">APSP(Undirected graph)</td>
<td align="center">SPFA/Floyd</td>
<td align="center">SPFA</td>
<td align="center">SPFA</td>
</tr>
<tr>
<td align="center">APSP(Directed graph)</td>
<td align="center">Floyd</td>
<td align="center">SPFA/Dijkstra+heap</td>
<td align="center">SPFA</td>
</tr>
</tbody></table>
<p>​                                                                        APSP((All Pairs Shortest Path))</p>
<h4 id="Complexity"><a href="#Complexity" class="headerlink" title="Complexity"></a>Complexity</h4><table>
<thead>
<tr>
<th align="center">Solving ways</th>
<th align="center">Time Complexity</th>
<th align="center">Space Complexity</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Dijkstra+heap</td>
<td align="center">O(E*lgV)</td>
<td align="center">O(n^2)</td>
</tr>
<tr>
<td align="center">SPFA</td>
<td align="center">O(kE) (Not stable)</td>
<td align="center">O(n)</td>
</tr>
<tr>
<td align="center">Floyd</td>
<td align="center">O(n^3)</td>
<td align="center">O(n)</td>
</tr>
</tbody></table>
<h2 id="Reference-Links"><a href="#Reference-Links" class="headerlink" title="Reference Links:"></a>Reference Links:</h2><p>1.<a href="https://www.luogu.com.cn/problem/P3110" target="_blank" rel="noopener">https://www.luogu.com.cn/problem/P3110</a></p>
<p>2.<a href="https://www.luogu.com.cn/problem/P2853" target="_blank" rel="noopener">https://www.luogu.com.cn/problem/P2853</a></p>
<p>3.<a href="https://en.wikipedia.org/wiki/Depth-first_search" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Depth-first_search</a></p>
<p>4.<a href="https://en.wikipedia.org/wiki/Breadth-first_search" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Breadth-first_search</a></p>
<p>5.<a href="https://en.wikipedia.org/wiki/Shortest_Path_Faster_Algorithm" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Shortest_Path_Faster_Algorithm</a></p>
<p>6.<a href="https://en.wikipedia.org/wiki/Floyd–Warshall_algorithm" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm</a></p>
<p>7.<a href="https://en.wikipedia.org/wiki/Dijkstra' target="_blank" rel="noopener"s_algorithm">https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm</a></p>
<p>8.<a href="https://blog.csdn.net/qq_35644234/article/details/60870719" target="_blank" rel="noopener">https://blog.csdn.net/qq_35644234/article/details/60870719</a></p>
<p>9.<a href="http://www.usaco.org/index.php?page=viewproblem2&amp;cpid=969&amp;lang=en" target="_blank" rel="noopener">http://www.usaco.org/index.php?page=viewproblem2&amp;cpid=969&amp;lang=en</a></p>
<p>10.<a href="https://www.luogu.com.cn/problem/P2966" target="_blank" rel="noopener">https://www.luogu.com.cn/problem/P2966</a></p>
<p>11.<a href="http://wcipeg.com/wiki/Shortest_Path_Faster_Algorithm" target="_blank" rel="noopener">http://wcipeg.com/wiki/Shortest_Path_Faster_Algorithm</a></p>
<p>12.<a href="https://www.cnblogs.com/flipped/p/6830073.html" target="_blank" rel="noopener">https://www.cnblogs.com/flipped/p/6830073.html</a></p>
<p>12.<a href="https://www.luogu.com.cn/problem/P3106" target="_blank" rel="noopener">https://www.luogu.com.cn/problem/P3106</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mavericktang.github.io/Blogs/2020/02/10/Attendence%20Taking/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blogs/images/avatar.gif">
      <meta itemprop="name" content="Haotian Tang">
      <meta itemprop="description" content="Live without Barricades!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mavericreate.Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/Blogs/2020/02/10/Attendence%20Taking/" class="post-title-link" itemprop="url">Attendence Taking program design</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-10 15:13:57" itemprop="dateCreated datePublished" datetime="2020-02-10T15:13:57-08:00">2020-02-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-11 20:04:59" itemprop="dateModified" datetime="2020-03-11T20:04:59-07:00">2020-03-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blogs/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>6 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Attendence-Taking-program-design"><a href="#Attendence-Taking-program-design" class="headerlink" title="Attendence Taking program design"></a>Attendence Taking program design</h1><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p><strong>Mr.Lartuno</strong> give us the project that we need to design a Attendence software for him. (<del>Because he is lazy to finish it himself</del>)  So here is how it is designed.</p>
<h2 id="Design-the-structure"><a href="#Design-the-structure" class="headerlink" title="Design the structure"></a>Design the structure</h2><p>Use <strong>FileIO</strong> to help me get the students list save and passward saving (Mr.Lartuno <del>is so lazy that he</del> wants students to input their information to finish attendence themselves). And use regular expression to help me find out if the password is complicating enough (<del>Make our work complecate enough</del>).</p>
<h2 id="Start-the-project"><a href="#Start-the-project" class="headerlink" title="Start the project"></a>Start the project</h2><h3 id="FileIO-guide"><a href="#FileIO-guide" class="headerlink" title="FileIO guide"></a>FileIO guide</h3><ul>
<li>Import settings</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br></pre></td></tr></table></figure>

<ul>
<li>Get Input</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">File filename = <span class="keyword">new</span> File(<span class="string">"/Users/maverick/Desktop/1.txt"</span>);<span class="comment">//Asolute path to the file you are going to open</span></span><br><span class="line">		Scanner s=<span class="keyword">new</span> Scanner(filename);</span><br></pre></td></tr></table></figure>

<ul>
<li>Print output</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FileOutputStream fout = <span class="keyword">new</span> FileOutputStream(<span class="string">"a"</span>, <span class="keyword">true</span>);</span><br><span class="line">PrintWriter fou = <span class="keyword">new</span> PrintWriter(fout);</span><br><span class="line">fou.println(<span class="string">"datas"</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>Other important staffs</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> FileNotFoundException</span>&#123;<span class="comment">//Judge if error accur</span></span><br><span class="line">  <span class="comment">//code segments.....</span></span><br><span class="line">fou.close();<span class="comment">//Remember to close the printwriter after</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Regular-expression-guide"><a href="#Regular-expression-guide" class="headerlink" title="Regular expression guide"></a>Regular expression guide</h3><ul>
<li>Import settings</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"><span class="comment">//Or only one</span></span><br><span class="line"><span class="keyword">import</span> java.util.regex.*;</span><br></pre></td></tr></table></figure>

<ul>
<li>Use example #1 (Find the last number in a sequence)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String s = <span class="string">"A876X"</span>;<span class="comment">//Whatever sequence</span></span><br><span class="line">Pattern pattern = Pattern.compile(<span class="string">"(\\d)[^\\d]*$"</span>);<span class="comment">//(\\d):a number,[^\\d]*:letters which are equal to or more than 0,$:End leter</span></span><br><span class="line">Matcher matcher = pattern.matcher(s);<span class="comment">//Find the right string based on the regular expression</span></span><br><span class="line"><span class="keyword">if</span>(matcher.find())<span class="comment">//if we find the one</span></span><br><span class="line">System.out.println(matcher.group(<span class="number">1</span>));<span class="comment">//print out the number or (\\d)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>The use of Mathcer.start()/ Matcher.end()/ Matcher.group()</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Pattern p=Pattern.compile(“\d+”);</span><br><span class="line">Matcher m=p.matcher(“aaa2223bb”);</span><br><span class="line">m.find();<span class="comment">//matching2223 (matches(),lookingAt(),find() has the same function) </span></span><br><span class="line">m.start();<span class="comment">//return 3 (the poistion that start) Attention!!!: Sequence's first letter's position is 0</span></span><br><span class="line">m.end();<span class="comment">//return 7 (the poistion that end)</span></span><br><span class="line">m.group();<span class="comment">//return 2233 (The letters u were tring to find)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Useful Regular expression in different situation</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//1 Email：</span></span><br><span class="line">^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</span><br><span class="line"> <span class="comment">//2 Website：</span></span><br><span class="line">  [a-zA-Z0-<span class="number">9</span>][-a-zA-Z0-<span class="number">9</span>]&#123;<span class="number">0</span>,<span class="number">62</span>&#125;(/.[a-zA-Z0-<span class="number">9</span>][-a-zA-Z0-<span class="number">9</span>]&#123;<span class="number">0</span>,<span class="number">62</span>&#125;)+/.?</span><br><span class="line"> <span class="comment">//3 InternetURL：</span></span><br><span class="line">  [a-zA-z]+:<span class="comment">//[^\s]* or ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$</span></span><br><span class="line"><span class="comment">// 4 phone number：</span></span><br><span class="line">^(<span class="number">13</span>[<span class="number">0</span>-<span class="number">9</span>]|<span class="number">14</span>[<span class="number">5</span>|<span class="number">7</span>]|<span class="number">15</span>[<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>]|<span class="number">18</span>[<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>])\d&#123;<span class="number">8</span>&#125;$<span class="comment">//or</span></span><br><span class="line">  ^(\(\d&#123;<span class="number">3</span>,<span class="number">4</span>&#125;-)|\d&#123;<span class="number">3.4</span>&#125;-)?\d&#123;<span class="number">7</span>,<span class="number">8</span>&#125;$</span><br><span class="line"> <span class="comment">//5 Account(Start with letter，4-15bytes，Allow letters,numbers,underline)：</span></span><br><span class="line">  ^[a-zA-Z][a-zA-Z0-<span class="number">9</span>_]&#123;<span class="number">4</span>,<span class="number">15</span>&#125;$</span><br><span class="line"><span class="comment">//6 Weak password(Start with letter，5-17bytes，Allow letters,numbers,underline)：</span></span><br><span class="line">  ^[a-zA-Z]\w&#123;<span class="number">5</span>,<span class="number">17</span>&#125;$</span><br><span class="line"><span class="comment">//7 Strong password(Start with letter，8-10bytes，Allow letters,numbers,underline)：</span></span><br><span class="line">  ^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).&#123;<span class="number">8</span>,<span class="number">10</span>&#125;$  </span><br><span class="line"><span class="comment">//8 date：</span></span><br><span class="line">  ^\d&#123;<span class="number">4</span>&#125;-\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;-\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line"><span class="comment">//9 Chinese letter</span></span><br><span class="line">[\u4e00-\u9fa5]</span><br></pre></td></tr></table></figure>

<h2 id="Break-the-whole-program-into-small-functions-add-together"><a href="#Break-the-whole-program-into-small-functions-add-together" class="headerlink" title="Break the whole program into small functions add together"></a>Break the whole program into small functions add together</h2><h3 id="I-will-explain-the-details-that-will-easily-cause-bugs-in-my-code-so-don’t-worry"><a href="#I-will-explain-the-details-that-will-easily-cause-bugs-in-my-code-so-don’t-worry" class="headerlink" title="I will explain the details that will easily cause bugs in my code, so don’t worry."></a>I will explain the details that will easily cause bugs in my code, so don’t worry.</h3><ul>
<li>At first we should design the main function</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> FileNotFoundException </span>&#123; </span><br><span class="line">		initialize();</span><br><span class="line">		welcomepage(); </span><br><span class="line">		Attendence(); </span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Then we need to Initialize the settings</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">()</span><span class="keyword">throws</span> FileNotFoundException</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(!dir.exists())&#123;<span class="comment">//Make folder to put attendence file</span></span><br><span class="line">		dir.mkdir();</span><br><span class="line">	&#125;</span><br><span class="line">	getfilename();<span class="comment">//Get the attendence file name (Date)</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">50</span>;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">10</span>;j++)&#123;</span><br><span class="line">			students[i][j]=<span class="string">"Absent"</span>;<span class="comment">//Initialize the students array to Abesent, so that later we can use it</span></span><br><span class="line">		&#125;</span><br><span class="line">	Scanner s=<span class="keyword">new</span> Scanner(fin);</span><br><span class="line">	<span class="keyword">while</span>(s.hasNextLine())&#123;</span><br><span class="line">		String str=s.nextLine();</span><br><span class="line">		String[] m;</span><br><span class="line">		m=str.split(<span class="string">" "</span>);</span><br><span class="line">		cnt++;</span><br><span class="line">		<span class="keyword">for</span>(String ch : m)&#123;</span><br><span class="line">			<span class="keyword">if</span>(ch!=<span class="keyword">null</span>&amp;&amp;students[cnt][x[cnt]]!=<span class="keyword">null</span>)&#123;<span class="comment">//Bug#1</span></span><br><span class="line">			x[cnt]++;students[cnt][x[cnt]]=ch;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;cnt;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(x[i]==<span class="number">4</span>)&#123;<span class="comment">//No password</span></span><br><span class="line">			System.out.println(<span class="string">"System detect that"</span>+students[i][<span class="number">2</span>]+<span class="string">"are using this for the first time"</span>);</span><br><span class="line">			System.out.println(<span class="string">"Please go to "</span>+<span class="string">"\""</span>+fin.getAbsolutePath()+<span class="string">"\""</span>+<span class="string">"to set up passwords"</span>);</span><br><span class="line">			System.out.println(<span class="string">"Password should contain biggercase and smallcase and numbers and were 8 to 10 bytes long"</span>);</span><br><span class="line">			System.exit(<span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(x[i]==<span class="number">5</span>)&#123;<span class="comment">//have password</span></span><br><span class="line">       <span class="comment">//Then use the regular expression to find out if password met the request</span></span><br><span class="line">			Pattern pattern = Pattern.compile(<span class="string">"^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).&#123;8,10&#125;$"</span>);</span><br><span class="line">			Matcher matcher = pattern.matcher(students[i][<span class="number">5</span>]);</span><br><span class="line">					<span class="keyword">if</span>(!matcher.find())&#123;</span><br><span class="line">				System.out.println(<span class="string">"System detect that "</span>+students[i][<span class="number">2</span>]+<span class="string">"'s password is set wrong"</span>);</span><br><span class="line">				System.out.println(<span class="string">"Please go to "</span>+<span class="string">"\""</span>+fin.getAbsolutePath()+<span class="string">"\""</span>+<span class="string">"to reset passwords"</span>);</span><br><span class="line">				System.out.println(<span class="string">"Password should contain at least one bigger case and one lower case and numbers"</span>);</span><br><span class="line">				System.exit(<span class="number">0</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Welcome page </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">welcomepage</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(filename+<span class="string">" Attendence Taking"</span>);</span><br><span class="line">		System.out.println(<span class="string">"Please input Your name(First name, Capitalize) to take attendence"</span>);</span><br><span class="line">		System.out.println(<span class="string">"Here is the students' names and their number"</span>);</span><br><span class="line">		System.out.println(<span class="string">"If you want to add or delete students"</span>);</span><br><span class="line">		System.out.println(<span class="string">"Please go to "</span>+<span class="string">"\""</span>+fin.getAbsolutePath()+<span class="string">"\""</span>+<span class="string">"to make changes"</span>);</span><br><span class="line">		System.out.println(<span class="string">"If you want to add or delete students"</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Get date </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getfilename</span><span class="params">()</span></span>&#123;</span><br><span class="line">	Calendar cal=Calendar.getInstance();<span class="comment">//Get from internet this method    </span></span><br><span class="line">	<span class="keyword">int</span> y=cal.get(Calendar.YEAR);      </span><br><span class="line">	<span class="keyword">int</span> m=cal.get(Calendar.MONTH)+<span class="number">1</span>;      </span><br><span class="line">	<span class="keyword">int</span> d=cal.get(Calendar.DATE); </span><br><span class="line">	 filename = String.valueOf(y)+<span class="string">"."</span>+String.valueOf(m)+<span class="string">"."</span>+String.valueOf(d);</span><br><span class="line">	<span class="comment">//System.out.print(filename);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Take Attendance </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Attendence</span><span class="params">()</span> <span class="keyword">throws</span> FileNotFoundException</span>&#123;</span><br><span class="line">		Scanner s2=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		String a=<span class="string">"X"</span>,b;</span><br><span class="line">		<span class="keyword">while</span>(a!=<span class="string">"E"</span>)&#123;<span class="comment">//"E"is the end code</span></span><br><span class="line">			a=getname();</span><br><span class="line">			b=getpassword();</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>Functions inside Attendence()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getpassword</span><span class="params">()</span></span>&#123;<span class="comment">//Only show the getpassword()Because getname works the same way</span></span><br><span class="line">	Boolean h=<span class="keyword">true</span>;</span><br><span class="line">	String a=<span class="string">"H"</span>;</span><br><span class="line">	<span class="keyword">int</span> m=-<span class="number">1</span>,x=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(h)&#123;</span><br><span class="line">	System.out.println(<span class="string">"Please input your password: "</span>);</span><br><span class="line">	a=s.nextLine();</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++)&#123;</span><br><span class="line"><span class="comment">//		System.out.println(students[i][5]);</span></span><br><span class="line">		<span class="keyword">if</span>(a.equals(students[i][<span class="number">5</span>]))&#123;<span class="comment">//Java's comparation is different from C++</span></span><br><span class="line">			m=<span class="number">1</span>;</span><br><span class="line">			students[i][<span class="number">6</span>]=<span class="string">"Attended"</span>;</span><br><span class="line">			<span class="keyword">break</span>;<span class="comment">//This break only break the inside for()loop</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(a.equals(<span class="string">"E"</span>))&#123;<span class="comment">//End</span></span><br><span class="line">			System.exit(<span class="number">0</span>);<span class="comment">//No need to continue</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">		<span class="keyword">if</span>(m==<span class="number">1</span>)&#123;<span class="comment">//Break the while loop</span></span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			x++;</span><br><span class="line">	System.out.println(<span class="string">"Please input the right password!"</span>);</span><br><span class="line">	System.out.println(<span class="string">"U have "</span>+(<span class="number">3</span>-x)+<span class="string">" chances left to put the password right"</span>);</span><br><span class="line">	<span class="keyword">if</span>(<span class="number">3</span>-x==<span class="number">0</span>)&#123;</span><br><span class="line">		System.out.println(<span class="string">"U failed to input your password!"</span>);</span><br><span class="line">		System.exit(<span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> a;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p>From here we have done most about the program! But we still need to:</p>
<h2 id="Rewiew-the-bugs-we-met"><a href="#Rewiew-the-bugs-we-met" class="headerlink" title="Rewiew the bugs we met!"></a>Rewiew the bugs we met!</h2><h3 id="Bug1"><a href="#Bug1" class="headerlink" title="#Bug1"></a>#Bug1</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for(String ch : m)&#123;</span><br><span class="line">				if(ch!&#x3D;null&amp;&amp;students[cnt][x[cnt]]!&#x3D;null)&#123;&#x2F;&#x2F;Bug#1</span><br><span class="line">				x[cnt]++;students[cnt][x[cnt]]&#x3D;ch;</span><br><span class="line">				&#125;</span><br><span class="line">				else</span><br><span class="line">					continue;</span><br><span class="line">			&#125;</span><br></pre></td></tr></table></figure>



<p>When we declare new variables, we need to be careful wether it is declared or not. Because we can’t put null value to a variable. That’s a very common bug called:Null Pointer Exception (<code>java.lang.NullPointerException</code>).</p>
<p>You can go to <a href="https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it" target="_blank" rel="noopener" title="Stackflow">StackOverFlow</a> to have a look.</p>
<h2 id="Now-we-are-done"><a href="#Now-we-are-done" class="headerlink" title="Now we are done"></a>Now we are done</h2><p>Although there can be more useful functions in it, but I chose to stop (<del>Because I am lazy as Mr. Lartuno</del>). </p>
<p>Here is some joke about today’s lesson:</p>
<p>“I don’t care about warning, I only care about error!”</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mavericktang.github.io/Blogs/2020/02/10/Nuisance-Hexo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blogs/images/avatar.gif">
      <meta itemprop="name" content="Haotian Tang">
      <meta itemprop="description" content="Live without Barricades!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mavericreate.Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/Blogs/2020/02/10/Nuisance-Hexo/" class="post-title-link" itemprop="url">Nuisance-Hexo</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-10 15:13:57" itemprop="dateCreated datePublished" datetime="2020-02-10T15:13:57-08:00">2020-02-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-14 17:19:08" itemprop="dateModified" datetime="2020-02-14T17:19:08-08:00">2020-02-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blogs/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Hexo-Probably-the-most-detailed-guide-for-2020"><a href="#Hexo-Probably-the-most-detailed-guide-for-2020" class="headerlink" title="Hexo: Probably the most detailed guide for 2020"></a>Hexo: Probably the most detailed guide for 2020</h1><h2 id="Introducing-Hexo-and-this-blog"><a href="#Introducing-Hexo-and-this-blog" class="headerlink" title="Introducing Hexo and this blog"></a>Introducing Hexo and this blog</h2><p><strong>Hexo</strong> is a useful tool for people who want to create their own blog website. It is really a convenient tool for it will automatically generate the beautiful designed website and even help you upload it to your Github. The perfect thing about blog is that it can save the people later who do the same thing energy and time. Same reason as I started my blog with this article. It took me 3 hours to use this tool for the bugs and the obsolete blogs elsewhere. Now on 9 February 2020, here we go.</p>
<h2 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h2><p>Here is the things I believe you guys already have and grasped:</p>
<ul>
<li><strong>Git tools</strong></li>
<li><strong>Github account</strong></li>
<li><strong>Xcode command line tools</strong></li>
<li><strong>nvm and Node.js</strong><br>If you don’t have it, please see the link below to get those staffs!</li>
</ul>
<h2 id="Get-Hexo-work-on-your-MAC"><a href="#Get-Hexo-work-on-your-MAC" class="headerlink" title="Get Hexo work on your MAC!"></a>Get Hexo work on your MAC!</h2><p>Go to Terminal, and input those code:</p>
<ul>
<li>Download Hexo<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></li>
<li>Its extension (Add sudo in the front if not working)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
Use this if error exists when you download the extension (Take me half hour to get those things down)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install hexo-cli -g  </span><br><span class="line">npm install hexo-deployer-git --save </span><br><span class="line">mkdir ~&#x2F;.npm-global</span><br><span class="line">npm config set prefix &#39;~&#x2F;.npm-global&#39;</span><br><span class="line">export PATH&#x3D;~&#x2F;.npm-global&#x2F;bin:$PATH</span><br><span class="line">source ~&#x2F;.profile</span><br><span class="line">npm install -g jshint</span><br><span class="line">NPM_CONFIG_PREFIX&#x3D;~&#x2F;.npm-global</span><br></pre></td></tr></table></figure>
Big ones from stackoverflow said that it was global download?(<del>Whatever</del>)</li>
</ul>
<h2 id="Use-hexo-to-create-your-Blog-project"><a href="#Use-hexo-to-create-your-Blog-project" class="headerlink" title="Use hexo to create your Blog project!"></a>Use hexo to create your Blog project!</h2><ul>
<li>Now use command cd to get to an empty folder(Must be empty, if error exist just create a new one)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ......&#x2F;&#x2F;whatever your folder is</span><br></pre></td></tr></table></figure></li>
<li>Initialize your folder, get the basic model for your blog<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure></li>
<li>Generate your website(test)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">or</span><br><span class="line">hexo generate</span><br></pre></td></tr></table></figure></li>
<li>View your website in your browser<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br><span class="line">or</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
Default location: <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a></li>
</ul>
<h2 id="Get-your-Blog-available-online"><a href="#Get-your-Blog-available-online" class="headerlink" title="Get your Blog available online!"></a>Get your Blog available online!</h2><h3 id="Get-SSH-key-on-your-Github"><a href="#Get-SSH-key-on-your-Github" class="headerlink" title="Get SSH key on your Github"></a>Get SSH key on your Github</h3><p>See it you got your SSH key on your computer</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~&#x2F;. ssh</span><br></pre></td></tr></table></figure>
<p>If there is no respond just skip action 2 to action 3</p>
<p>Get your SSH key</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</span><br><span class="line">Generating public&#x2F;private rsa key pair.</span><br><span class="line">Enter file in which to save the key (&#x2F;c&#x2F;Users&#x2F;you&#x2F;.ssh&#x2F;id_rsa): [Press enter]</span><br></pre></td></tr></table></figure>
<p>And press return until you see this</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Your identification has been saved in &#x2F;c&#x2F;Users&#x2F;you&#x2F;.ssh&#x2F;id_rsa.</span><br><span class="line">Your public key has been saved in &#x2F;c&#x2F;Users&#x2F;you&#x2F;.ssh&#x2F;id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@example.com</span><br></pre></td></tr></table></figure>
<p>Go to the folder where has your ssh key(Here is the route looks like)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;c&#x2F;Users&#x2F;you&#x2F;.ssh&#x2F;id_rsa.</span><br></pre></td></tr></table></figure>
<p>Then go to settings, <a href="https://github.com/settings/keys" target="_blank" rel="noopener" title="Github">Express</a><br>Then add your new SSH key<br>Then you need to do some change on this file<code>_config.yml</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https:&#x2F;&#x2F;github.com&#x2F;wavky&#x2F;wavky.github.io.git(Your Github repository，like above)</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p><strong>Be careful with the space under the deploy!</strong>(My half hour went away!)<br>@(Error: My Hexo deploy failed)<br>Error reporting will be like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">You should configure deployment settings in _config.yml first!</span><br><span class="line">Available deployer plugins: git</span><br></pre></td></tr></table></figure>
<p>Then finally<br>Post your Blog in website:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br></pre></td></tr></table></figure>
<h4 id="Have-trouble-finding-your-blog"><a href="#Have-trouble-finding-your-blog" class="headerlink" title="Have trouble finding your blog?"></a>Have trouble finding your blog?</h4><p>-&gt;Settings-&gt;GitHub Pages</p>
<p>Thanks for your patience to read this article…..<br><strong>Just joking</strong><br>You might also met the problem like<code>Hexo no styles</code><br>here is the way to solve it<br>Go to your <code>./public/index.html</code> (In your folder)<br>Found(use command+f)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;css&#x2F;style.css&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>Exchange with</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;(Here is your website name)&#x2F;css&#x2F;style.css&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>Such as my website named <a href="https://mavericktang.github.io/Blogs/">https://mavericktang.github.io/Blogs/</a><br>Then the place should be <code>Blogs</code></p>
<h4 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h4><p>Hopefully this article would help you with to solve your problem.<br>And feel free to visit my personal web!<br><a href="https://mavericktang.github.io/mavericreate/">https://mavericktang.github.io/mavericreate/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mavericktang.github.io/Blogs/2020/02/10/String%20In%20C%20and%20C++(Intro)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blogs/images/avatar.gif">
      <meta itemprop="name" content="Haotian Tang">
      <meta itemprop="description" content="Live without Barricades!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mavericreate.Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/Blogs/2020/02/10/String%20In%20C%20and%20C++(Intro)/" class="post-title-link" itemprop="url">String In C and C++(Intro)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-10 15:13:57" itemprop="dateCreated datePublished" datetime="2020-02-10T15:13:57-08:00">2020-02-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-15 19:35:38" itemprop="dateModified" datetime="2020-02-15T19:35:38-08:00">2020-02-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blogs/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>7.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="How-to-use-C-String-in-Competition"><a href="#How-to-use-C-String-in-Competition" class="headerlink" title="How to use C++ String in Competition"></a>How to use C++ String in Competition</h1><p>Today, we are going to talk about C++ String and how to use it in competition. Since it is my first blog about USACO or CCF(In China) competition. And also It works for Computer Science students in USA. This article will divide as two parts. Each part will explain char and String in C or C++.</p>
<h2 id="Char-in-C"><a href="#Char-in-C" class="headerlink" title="Char in C"></a>Char in C</h2><h3 id="Basic-info"><a href="#Basic-info" class="headerlink" title="Basic info"></a>Basic info</h3><p><strong>Remember there is no String in C!</strong> String belong to C++’s library. Now you see the privilege of C++.</p>
<h4 id="Declare"><a href="#Declare" class="headerlink" title="Declare:"></a>Declare:</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> greeting[<span class="number">6</span>] = &#123;<span class="string">'H'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>, <span class="string">'\0'</span>&#125;;<span class="comment">//char end with '\0' which Means NULL</span></span><br><span class="line"><span class="comment">//Or</span></span><br><span class="line"><span class="keyword">char</span> greeting[] = <span class="string">"Hello"</span>;</span><br></pre></td></tr></table></figure>

<p><strong>Warning</strong>: You need to be awared that when to use<strong>‘’</strong>, and when to use<strong>“”</strong>.</p>
<p>Here is how it is stored in computer, <strong>Warning</strong>: Count start with 0!!!</p>
<p>![](String In C and C++/string_representation.jpg)</p>
<h4 id="Printout"><a href="#Printout" class="headerlink" title="Printout"></a>Printout</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"%s"</span>, greeting );<span class="comment">//"Hello" will be print</span></span><br></pre></td></tr></table></figure>

<h3 id="Six-functions-about-Char"><a href="#Six-functions-about-Char" class="headerlink" title="Six functions about Char"></a>Six functions about Char</h3><h4 id="Here-is-the-example-for-strcpy-and-strcat-and-strlen-and-I-will-explain-in-the-Annotation"><a href="#Here-is-the-example-for-strcpy-and-strcat-and-strlen-and-I-will-explain-in-the-Annotation" class="headerlink" title="Here is the example for strcpy and strcat and strlen, and I will explain in the Annotation"></a>Here is the example for strcpy and strcat and strlen, and I will explain in the Annotation</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;//The name is String, but there is still no way you can declare string in c</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">char</span> str1[<span class="number">12</span>]=<span class="string">"Hello"</span>,str2[<span class="number">12</span>]=<span class="string">"World"</span>,str3[<span class="number">12</span>];</span><br><span class="line">  </span><br><span class="line">   <span class="comment">/* Copy str1 to str3 */</span></span><br><span class="line">   <span class="built_in">strcpy</span>(str3, str1);</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"strcpy( str3, str1) :  %s\n"</span>, str3 );</span><br><span class="line">  </span><br><span class="line">   <span class="comment">/* Link str1 and str2 */</span></span><br><span class="line">   <span class="built_in">strcat</span>( str1, str2);</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"strcat( str1, str2):   %s\n"</span>, str1 );</span><br><span class="line">  </span><br><span class="line">   <span class="comment">/* The length of str1*/</span></span><br><span class="line">   <span class="keyword">int</span> len = <span class="built_in">strlen</span>(str1);</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"strlen(str1) :  %d\n"</span>, len );</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Here is the output:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">strcpy( str3, str1) :  Hello</span><br><span class="line">strcat( str1, str2):   HelloWorld</span><br><span class="line">strlen(str1) :  10</span><br></pre></td></tr></table></figure>

<p>Remeber to be careful about the size of the array!</p>
<p>And here are three other functions which would be a little compacte</p>
<h4 id="strcmp"><a href="#strcmp" class="headerlink" title="strcmp"></a>strcmp</h4><p><strong>Use</strong>: Compare 2 strings if they are same or not, same return 0</p>
<p><strong>Explain</strong>: The function compare their ascil number, from the first index of the string to the end, if their ascil number equal then continue, if they are not equal then return their difference.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *p=<span class="string">"aBc"</span>;</span><br><span class="line">    <span class="keyword">char</span> *q=<span class="string">"Abc"</span>;</span><br><span class="line">    <span class="keyword">char</span> *h=<span class="string">"aBc"</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"strcmp(p,q):%d\n"</span>,<span class="built_in">strcmp</span>(p,q));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"strcmp(p,h):%d\n"</span>,<span class="built_in">strcmp</span>(p,h));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;   </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">strcmp(p,q):32   (97-65)</span></span><br><span class="line"><span class="comment">strcmp(p,h):0</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>FAQ Ascil chart</p>
<p>![](String In C and C++/Ascii.png)</p>
<p>Remember ‘a’=97, ‘A’=65.</p>
<h4 id="strchr-and-strstr"><a href="#strchr-and-strstr" class="headerlink" title="strchr and strstr"></a>strchr and strstr</h4><p>They looks like brother to me. The function strchr(str1,ch) return an array point to the place where ch first appear in str1. And The function strctr(str1,str2) return an array point to the place where str2 first appear in str1.</p>
<h4 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">const</span> <span class="keyword">char</span> str[] = <span class="string">"http://www.github.com"</span>;</span><br><span class="line">   <span class="keyword">const</span> <span class="keyword">char</span> ch = <span class="string">'.'</span>;</span><br><span class="line">   <span class="keyword">char</span> *ret;</span><br><span class="line">   ret = <span class="built_in">strchr</span>(str, ch);</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"After |%c| the string is - |%s|\n"</span>, ch, ret);</span><br><span class="line">   <span class="keyword">char</span> *substr = <span class="string">"www."</span>;</span><br><span class="line">    <span class="keyword">char</span> *s = <span class="built_in">strstr</span>(str, substr);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"After |%s| the string is - |%s|\n"</span>,substr,s);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*Output</span></span><br><span class="line"><span class="comment">After |.| the string is - |.github.com|</span></span><br><span class="line"><span class="comment">After |www.| the string is - |www.github.com|</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p><strong>Reminder</strong>: Those function will keep the string we are searching!</p>
<h2 id="String-in-C"><a href="#String-in-C" class="headerlink" title="String in C++"></a>String in C++</h2><p>We can treat C++ as the son of C, so it inherits all the libaray from C. Which means that all the things above is also available for C++. But as the son of C, C++ have some new extensions that are not available in C.</p>
<p>String in C++ is much more easy to understand. It was as the same level as int and long long, which means we can add the strings!</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;//Remember to put this libaray in!</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="built_in">string</span> str1 = <span class="string">"Hello"</span>;</span><br><span class="line">   <span class="built_in">string</span> str2 = <span class="string">"World"</span>;</span><br><span class="line">   <span class="built_in">string</span> str3;</span><br><span class="line">   <span class="comment">// copy str1 to str3</span></span><br><span class="line">   str3 = str1;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="string">"str3 : "</span> &lt;&lt; str3 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"> </span><br><span class="line">   <span class="comment">// Link str1 with str2</span></span><br><span class="line">   str3 = str1 + str2;</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="string">"str1 + str2 : "</span> &lt;&lt; str3 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"> </span><br><span class="line">   <span class="comment">// The length of str3</span></span><br><span class="line">   <span class="keyword">int</span> len = str3.<span class="built_in">size</span>();</span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="string">"str3.size() :  "</span> &lt;&lt; len &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">str3 : Hello</span></span><br><span class="line"><span class="comment">str1 + str2 : HelloWorld</span></span><br><span class="line"><span class="comment">str3.size() :  10</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Examples-and-Solutions"><a href="#Examples-and-Solutions" class="headerlink" title="Examples and Solutions!"></a>Examples and Solutions!</h2><p><del>Warning: those are not for beginners!</del></p>
<p>I chose the question from <strong>USACO 1.3.3 Calf Flac</strong></p>
<h4 id="Here-is-the-question"><a href="#Here-is-the-question" class="headerlink" title="Here is the question:"></a>Here is the question:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">It is said that if you give an infinite number of cows an infinite number of heavy-duty laptops (with very large keys), that they will ultimately produce all the world’s great palindromes. Your job will be to detect these bovine beauties.</span><br><span class="line">Ignore punctuation, whitespace, numbers, and case when testing for palindromes, but keep these extra characters around so that you can print them out as the answer; just consider the letters &#96;A-Z’ and &#96;a-z’.</span><br><span class="line">Find the largest palindrome in a string no more than 20,000 characters long. The largest palindrome is guaranteed to be at most 2,000 characters long before whitespace and punctuation are removed.</span><br></pre></td></tr></table></figure>

<h4 id="SAMPLE-INPUT-file-calfflac-in"><a href="#SAMPLE-INPUT-file-calfflac-in" class="headerlink" title="SAMPLE INPUT (file calfflac.in)"></a>SAMPLE INPUT (file calfflac.in)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Confucius say: Madam, I&#39;m Adam.</span><br></pre></td></tr></table></figure>

<h4 id="OUTPUT-FORMAT"><a href="#OUTPUT-FORMAT" class="headerlink" title="OUTPUT FORMAT"></a>OUTPUT FORMAT</h4><p>The first line of the output should be the length of the longest palindrome found. The next line or lines should be the actual text of the palindrome (without any surrounding white space or punctuation but with all other characters) printed on a line (or more than one line if newlines are included in the palindromic text). If there are multiple palindromes of longest length, output the one that appears first.</p>
<h4 id="SAMPLE-OUTPUT-file-calfflac-out"><a href="#SAMPLE-OUTPUT-file-calfflac-out" class="headerlink" title="SAMPLE OUTPUT (file calfflac.out)"></a>SAMPLE OUTPUT (file calfflac.out)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">11</span><br><span class="line">Madam, I&#39;m Adam</span><br></pre></td></tr></table></figure>

<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>This question takes no hard thinking. Because the data is small(20,000Index) so that we try every single index of the sequence. Then it should be divided into two cases.</p>
<ol>
<li>Parlindrome’s length is odd</li>
<li>Parlindrome’s length is even</li>
</ol>
<p>And we have a varible to save the length every time we found a new palindrome. At the end we just need to print if out. Here is the code:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;//Use this to allow you to use isalpha(k[i]) and tolower(k[i])</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mx 20005</span></span><br><span class="line"><span class="keyword">int</span> at[mx],n=<span class="number">0</span>,l=<span class="number">0</span>,maxn=<span class="number">0</span>,ans;</span><br><span class="line"><span class="keyword">char</span> k[mx]=&#123;<span class="number">0</span>&#125;,m[mx]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">palindromes</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a1=<span class="number">1</span>,a2=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;x-i&gt;=<span class="number">0</span>&amp;&amp;i+x&lt;l&amp;&amp;m[x-i]==m[x+i];i++)a1+=<span class="number">2</span>;<span class="comment">//Get 1 from middle, length is odd</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;x-i&gt;=<span class="number">0</span>&amp;&amp;i+x+<span class="number">1</span>&lt;l&amp;&amp;m[x-i]==m[x+i+<span class="number">1</span>];i++)a2+=<span class="number">2</span>;<span class="comment">//Get 2 from middle, length is even</span></span><br><span class="line">	<span class="keyword">return</span> (a1&gt;a2)?a1:a2;<span class="comment">//Get the bigger one</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">while</span>((k[n]=getchar())!=EOF)n++;<span class="comment">//Special kind of put in, I will write ablog about it someday</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">isalpha</span>(k[i]))&#123;<span class="comment">//Judge ifk[i]is alpha</span></span><br><span class="line">			m[l]=<span class="built_in">tolower</span>(k[i]);<span class="comment">//If k[i] is bigger case, put it to lower</span></span><br><span class="line">			at[l++]=i;<span class="comment">//at save the place the new m[l]'s place in k[]</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;i++)&#123;</span><br><span class="line">		<span class="keyword">int</span> t=palindromes(i);</span><br><span class="line">		<span class="keyword">if</span>(t&gt;maxn)&#123;</span><br><span class="line">			maxn=t;ans=i+(t/<span class="number">2</span>);<span class="comment">//Save the longest for now</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	k[at[ans]+<span class="number">1</span>]=<span class="string">'\0'</span>;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;maxn&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;k[at[ans-maxn+<span class="number">1</span>]];</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Hahhhhh?</p>
<p>You don’t understand some code segment????????</p>
<p>Sure. I will change those with the way that’s easier for you.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;x-i&gt;=<span class="number">0</span>&amp;&amp;i+x&lt;l&amp;&amp;m[x-i]==m[x+i];i++)a1+=<span class="number">2</span>;<span class="comment">//Get 1 from middle, length is odd</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;x-i&gt;=<span class="number">0</span>&amp;&amp;i+x+<span class="number">1</span>&lt;l&amp;&amp;m[x-i]==m[x+i+<span class="number">1</span>];i++)a2+=<span class="number">2</span>;<span class="comment">//Get 2 from middle, length is even</span></span><br><span class="line"><span class="keyword">return</span> (a1&gt;a2)?a1:a2;<span class="comment">//Get the bigger one</span></span><br></pre></td></tr></table></figure>

<p>Can be write in this way:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=x;i++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(i+x&lt;l&amp;&amp;m[x-i]==m[x+i])</span><br><span class="line">				a1+=<span class="number">2</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=x;i++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(i+x+<span class="number">1</span>&lt;l&amp;&amp;m[x-i]==m[x+i+<span class="number">1</span>])</span><br><span class="line">				a2+=<span class="number">2</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">if</span>(a1&gt;a2)<span class="keyword">return</span> a1;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> a2;</span><br></pre></td></tr></table></figure>

<p>And for those kind of code:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">isalpha</span>(k[i]))&#123;<span class="comment">//Judge ifk[i]is alpha</span></span><br><span class="line">		m[l]=<span class="built_in">tolower</span>(k[i]);<span class="comment">//If k[i] is bigger case, put it to lower</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>If you don’t know those functions, we can actually write it ourslves.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> h=(<span class="keyword">int</span>)k[i];</span><br><span class="line"><span class="keyword">if</span>(h&gt;=<span class="number">65</span>&amp;&amp;h&lt;=<span class="number">90</span>)&#123;</span><br><span class="line">	m[l]=(<span class="keyword">char</span>)(h+<span class="number">32</span>);<span class="comment">//'A'=65,'Z'=90,'a'=97,'z'=122</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Question around String won’t be so hard. As long as we use the function properly. The best way for you to improve is not just to read this blog, but to exercise.</p>
<h4 id="Here-is-a-joke-about-programming"><a href="#Here-is-a-joke-about-programming" class="headerlink" title="Here is a joke about programming:"></a>Here is a joke about programming:</h4><p>In my opinion, C is a girl. Here are the reasons:</p>
<ol>
<li><p>No matter what you want it to do, she will never find a way herself.</p>
</li>
<li><p>Use complex method for simple problem</p>
</li>
<li><p>Can never realize the mistake she made herself</p>
</li>
<li><p>It is normal to waste time on her</p>
</li>
<li><p>As long as you have a mistake, she will find out all of a sudden</p>
</li>
<li><p>After all, it is your fault</p>
<p><strong>Please do not take this joke seriously!</strong></p>
</li>
</ol>
<h3 id="Reference-Link"><a href="#Reference-Link" class="headerlink" title="Reference Link"></a>Reference Link</h3><p>1.<a href="http://itfun.objweb.com/?paged=10（Joke）" target="_blank" rel="noopener">http://itfun.objweb.com/?paged=10（Joke）</a></p>
<p>2.<a href="https://frostpines.wordpress.com/2010/11/08/usaco-1-3-3-calf-flac/" target="_blank" rel="noopener">https://frostpines.wordpress.com/2010/11/08/usaco-1-3-3-calf-flac/</a>(USACO problem)</p>
<p>3.<a href="https://www.runoob.com/cplusplus/cpp-basic-input-output.html" target="_blank" rel="noopener">https://www.runoob.com/cplusplus/cpp-basic-input-output.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mavericktang.github.io/Blogs/2020/02/09/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Blogs/images/avatar.gif">
      <meta itemprop="name" content="Haotian Tang">
      <meta itemprop="description" content="Live without Barricades!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mavericreate.Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/Blogs/2020/02/09/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-09 09:16:06" itemprop="dateCreated datePublished" datetime="2020-02-09T09:16:06-08:00">2020-02-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-14 17:18:55" itemprop="dateModified" datetime="2020-02-14T17:18:55-08:00">2020-02-14</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>357</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Haotian Tang"
      src="/Blogs/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Haotian Tang</p>
  <div class="site-description" itemprop="description">Live without Barricades!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/Blogs/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/Blogs/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/MaverickTang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;MaverickTang" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/Blogs/agodsfor@gmail.com" title="E-Mail → agodsfor@gmail.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" class="cc-opacity" rel="noopener" target="_blank"><img src="/Blogs/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



        <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=450 src="//music.163.com/outchain/player?type=0&id=2897146797&auto=1&height=430"></iframe>
      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mavericreate</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">80k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">1:13</span>
</div>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.2
  </div>

        
<div class="busuanzi-count">
  <script pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/Blogs/lib/anime.min.js"></script>
  <script src="/Blogs/lib/pjax/pjax.min.js"></script>
  <script src="/Blogs/lib/velocity/velocity.min.js"></script>
  <script src="/Blogs/lib/velocity/velocity.ui.min.js"></script>

<script src="/Blogs/js/utils.js"></script>

<script src="/Blogs/js/motion.js"></script>


<script src="/Blogs/js/schemes/pisces.js"></script>


<script src="/Blogs/js/next-boot.js"></script>

<script src="/Blogs/js/bookmark.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.getAttribute('pjax') !== null) {
      script.setAttribute('pjax', '');
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/Blogs/js/local-search.js"></script>













    <div id="pjax">
  

  

    </div>
  <!--崩溃欺骗-->
  <script type="text/javascript" src="/js/crash_cheat.js"></script>
</body>
</html>
